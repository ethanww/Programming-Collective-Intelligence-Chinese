<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en" dir="ltr">
	<head>
		<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
		<meta name="keywords" content="Covariance and contravariance (computer science),C++,C sharp,Category (mathematics),Compiler,Delegate (.NET),Eiffel programming language,Exception handling,Functor,Generic programming,Inheritance (computer science)" />
<link rel="shortcut icon"  />
<link rel="search" type="application/opensearchdescription+xml"  />
<link rel="copyright"  />
		<title>Covariance and contravariance (computer science) - Wikipedia, the free encyclopedia</title>
		<style type="text/css" media="screen,projection">/*<![CDATA[*/ @import "/skins-1.5/monobook/main.css?9"; /*]]>*/</style>
		<link rel="stylesheet" type="text/css" media="print"  />
		<!--[if lt IE 5.5000]><style type="text/css">@import "/skins-1.5/monobook/IE50Fixes.css";</style><![endif]-->
		<!--[if IE 5.5000]><style type="text/css">@import "/skins-1.5/monobook/IE55Fixes.css";</style><![endif]-->
		<!--[if IE 6]><style type="text/css">@import "/skins-1.5/monobook/IE60Fixes.css";</style><![endif]-->
		<!--[if IE 7]><style type="text/css">@import "/skins-1.5/monobook/IE70Fixes.css?1";</style><![endif]-->
		<!--[if lt IE 7]><script type="text/javascript" src="/skins-1.5/common/IEFixes.js"></script>
		<meta http-equiv="imagetoolbar" content="no" /><![endif]-->
		
		<script type= "text/javascript">
			var skin = "monobook";
			var stylepath = "/skins-1.5";

			var wgArticlePath = "/wiki/$1";
			var wgScriptPath = "/w";
			var wgServer = "http://en.wikipedia.org";
                        
			var wgCanonicalNamespace = "";
			var wgNamespaceNumber = 0;
			var wgPageName = "Covariance_and_contravariance_(computer_science)";
			var wgTitle = "Covariance and contravariance (computer science)";
			var wgArticleId = 1104704;
			var wgIsArticle = true;
                        
			var wgUserName = null;
			var wgUserLanguage = "en";
			var wgContentLanguage = "en";
		</script>
		                
		<script type="text/javascript" src="/skins-1.5/common/wikibits.js?1"><!-- wikibits js --></script>
		<script type="text/javascript" src="/w/index.php?title=-&amp;action=raw&amp;gen=js"><!-- site js --></script>
		<style type="text/css">/*<![CDATA[*/
@import "/w/index.php?title=MediaWiki:Common.css&usemsgcache=yes&action=raw&ctype=text/css&smaxage=2678400";
@import "/w/index.php?title=MediaWiki:Monobook.css&usemsgcache=yes&action=raw&ctype=text/css&smaxage=2678400";
@import "/w/index.php?title=-&action=raw&gen=css&maxage=2678400";
/*]]>*/</style>
		<!-- Head Scripts -->
		<script type="text/javascript" src="/skins-1.5/common/ajax.js"></script>
	</head>
<body  class="mediawiki ns-0 ltr">
	<div id="globalWrapper">
		<div id="column-content">
	<div id="content">
		<a name="top" id="top"></a>
		<div id="siteNotice"><div style="text-align:right; font-size:80%">Your <b><a  class="extiw" title="wikimedia:Fundraising">continued donations</a></b> keep Wikipedia running!&nbsp;&nbsp;&nbsp;&nbsp;</div>
</div>		<h1 class="firstHeading">Covariance and contravariance (computer science)</h1>
		<div id="bodyContent">
			<h3 id="siteSub">From Wikipedia, the free encyclopedia</h3>
			<div id="contentSub"></div>
									<div id="jump-to-nav">Jump to: <a >navigation</a>, <a >search</a></div>			<!-- start content -->
			<p>A covariant type operator in a <a href="/wiki/Type_system.html" title="Type system">type system</a> preserves the <img class='tex' src="http://upload.wikimedia.org/math/4/9/d/49dc1443f33cf63082d6e193dd2af78f.png" alt="\le" /> ordering of types. A contravariant operator reverses <img class='tex' src="http://upload.wikimedia.org/math/4/9/d/49dc1443f33cf63082d6e193dd2af78f.png" alt="\le" />. If none of these apply, the operator is <i>invariant</i>. These terms come from category theory (mathematics) as explained below.</p>
<table id="toc" class="toc" summary="Contents">
<tr>
<td>
<div id="toctitle">
<h2>Contents</h2>
</div>
<ul>
<li class="toclevel-1"><a ><span class="tocnumber">1</span> <span class="toctext">Origin of the terms</span></a></li>
<li class="toclevel-1"><a ><span class="tocnumber">2</span> <span class="toctext">Language support</span></a>
<ul>
<li class="toclevel-2"><a ><span class="tocnumber">2.1</span> <span class="toctext">C++</span></a></li>
<li class="toclevel-2"><a ><span class="tocnumber">2.2</span> <span class="toctext">C#</span></a></li>
<li class="toclevel-2"><a ><span class="tocnumber">2.3</span> <span class="toctext">Eiffel</span></a></li>
<li class="toclevel-2"><a ><span class="tocnumber">2.4</span> <span class="toctext">Java</span></a></li>
<li class="toclevel-2"><a ><span class="tocnumber">2.5</span> <span class="toctext">REALbasic</span></a></li>
<li class="toclevel-2"><a ><span class="tocnumber">2.6</span> <span class="toctext">Scala</span></a></li>
<li class="toclevel-2"><a ><span class="tocnumber">2.7</span> <span class="toctext">Sather</span></a></li>
</ul>
</li>
<li class="toclevel-1"><a ><span class="tocnumber">3</span> <span class="toctext">See also</span></a></li>
<li class="toclevel-1"><a ><span class="tocnumber">4</span> <span class="toctext">External links</span></a></li>
</ul>
</td>
</tr>
</table>
<p><script type="text/javascript">
//<![CDATA[
 if (window.showTocToggle) { var tocShowText = "show"; var tocHideText = "hide"; showTocToggle(); } 
//]]>
</script></p>
<div class="editsection" style="float:right;margin-left:5px;">[<a  title="Edit section: Origin of the terms">edit</a>]</div>
<p><a name="Origin_of_the_terms" id="Origin_of_the_terms"></a></p>
<h2>Origin of the terms</h2>
<p>In <a href="/wiki/Object_oriented_programming.html" title="Object oriented programming">object oriented programming</a> it is possible for a specialized object to override methods defined by a more general object.</p>
<p>For this to work, if <img class='tex' src="http://upload.wikimedia.org/math/d/0/f/d0febe967e23bbaa79284accd1092328.png" alt="f:p_{f} \rightarrow r_{f}" /> overrides <img class='tex' src="http://upload.wikimedia.org/math/1/d/2/1d281db728cb81c56d475119c5f7d42a.png" alt="g:p_{g} \rightarrow r_{g}" />, where <i>p</i> and <i>r</i> denote parameter and return types respectively, then one must have <img class='tex' src="http://upload.wikimedia.org/math/1/b/5/1b5ecb2115490bf8c5d33fe34e0a06ce.png" alt="p_{g} \le p_{f}" /> and <img class='tex' src="http://upload.wikimedia.org/math/d/e/1/de140825b0ee47679893ed073d199e14.png" alt="r_{f} \le r_{g}" />. This is: <i>f</i> may accept a broader set of arguments than <i>g</i> but its return type must be a sub-type of the original one. This makes <i>g</i> substitutable by <i>f</i> in all <b>execution</b> contexts.</p>
<p>Thus, the origin of these terms comes from <a href="/wiki/Category_%28mathematics%29.html" title="Category (mathematics)">category theory</a>. If we see the types in the <a href="/wiki/Type_system.html" title="Type system">type system</a> as forming a category <span class="texhtml"><i>C</i></span>, with arrows representing the subtype relationship, then creating a piece of code, that accepts type <i>p</i> and returns type <i>r</i>, is actually a <a href="/wiki/Functor.html" title="Functor">functor</a> <img class='tex' src="http://upload.wikimedia.org/math/9/7/6/97658ce84338ac2c26c9a4449c5a437d.png" alt="F:CxC \rightarrow C" /> that creates a new type <img class='tex' src="http://upload.wikimedia.org/math/d/1/9/d196f90583048df5999ce66455ed6122.png" alt="p \rightarrow r" /> in the system. From the substitution principle above, this functor must be <a href="/wiki/Functor#Covariance_and_contravariance.html" title="Functor">contravariant</a> in the first argument and <a href="/wiki/Functor#Covariance_and_contravariance.html" title="Functor">covariant</a> in the second (see <a href="/wiki/Luca_Cardelli.html" title="Luca Cardelli">Luca Cardelli</a>).</p>
<p>The problem arises as different object oriented languages have different strategies to select the actual code used in a particular contexts and the first parameter is the object itself (which is <i>not</i> contravariant) (see Castagna's article below )</p>
<p>These terms are also used in the context of modern programming languages that offer other <i>functors</i> to create new types with type variables, as in <a href="/wiki/Generic_programming.html" title="Generic programming">generic programming</a> or <a href="/wiki/Parametric_polymorphism.html" title="Parametric polymorphism">parametric polymorphism</a>, and <a href="/wiki/Exception_handling.html" title="Exception handling">exception handling</a> where method definitions are enriched with annotations that indicate possible failures.</p>
<p>In general:</p>
<ul>
<li><b>Covariance</b> means that the type of arguments, return values, or exceptions of <a href="/wiki/Virtual_method.html" title="Virtual method">overriding methods</a> can be <a href="/wiki/Subtype.html" title="Subtype">subtypes</a> of the original types.</li>
<li><b>Contravariance</b> means that the type of arguments, return values, or exceptions of overriding methods can be <a href="/wiki/Supertype.html" title="Supertype">supertypes</a> of the original types.</li>
</ul>
<p>This is contrasted with <i>invariance</i>, where arguments have to be of exactly the same type.</p>
<div class="editsection" style="float:right;margin-left:5px;">[<a  title="Edit section: Language support">edit</a>]</div>
<p><a name="Language_support" id="Language_support"></a></p>
<h2>Language support</h2>
<p>How types are built from basic types, thus defining the sub-type relationship, and how new methods are defined and override or not existing methods depends on the language and sometimes not necesarily follow the substitution principle above adding runtime checking instead.</p>
<div class="editsection" style="float:right;margin-left:5px;">[<a  title="Edit section: C++">edit</a>]</div>
<p><a name="C.2B.2B" id="C.2B.2B"></a></p>
<h3>C++</h3>
<p><a href="/wiki/C%2B%2B.html" title="C++">C++</a> supports covariant return types in overridden virtual functions.</p>
<div class="editsection" style="float:right;margin-left:5px;">[<a  title="Edit section: C#">edit</a>]</div>
<p><a name="C.23" id="C.23"></a></p>
<h3>C#</h3>
<p>In the <a href="/wiki/C_sharp.html" title="C sharp">C#</a> programming language, support for both return-type covariance and parameter contravariance for <a href="/wiki/Delegate_%28.NET%29.html" title="Delegate (.NET)">delegates</a> was added in version 2.0 of the language. This could result in a lack of <a href="/wiki/Source-compatibility.html" title="Source-compatibility">source-compatibility</a> with code written for earlier versions of the language, but only in somewhat contrived examples.</p>
<p>Neither covariance nor contravariance are supported for method overriding.</p>
<div class="editsection" style="float:right;margin-left:5px;">[<a  title="Edit section: Eiffel">edit</a>]</div>
<p><a name="Eiffel" id="Eiffel"></a></p>
<h3>Eiffel</h3>
<p><a href="/wiki/Eiffel_programming_language.html" title="Eiffel programming language">Eiffel</a> allows covariant return and parameter types in overriding methods. This is possible because Eiffel does not require subclasses to be <a href="/wiki/Substitutability.html" title="Substitutability">substitutable</a> for superclasses â€” that is, subclasses are not necessarily subtypes.</p>
<p>However, this can lead to surprises if subclasses with such covariant parameter types are operated upon as though they were a more general class (<a href="/wiki/Polymorphism_%28computer_science%29.html" title="Polymorphism (computer science)">polymorphism</a>), leading to the possibility of <a href="/wiki/Compiler.html" title="Compiler">compiler</a> errors.</p>
<div class="editsection" style="float:right;margin-left:5px;">[<a  title="Edit section: Java">edit</a>]</div>
<p><a name="Java" id="Java"></a></p>
<h3>Java</h3>
<p>Exception covariance has been supported since the introduction of the language. Return type covariance is implemented in the <a href="/wiki/Java_programming_language.html" title="Java programming language">Java</a> programming language version J2SE 5.0. Parameter types have to be exactly the same (invariant) for <a href="/wiki/Method_overriding_%28programming%29.html" title="Method overriding (programming)">method overriding</a>, otherwise the method is <a href="/wiki/Type_polymorphism.html" title="Type polymorphism">overloaded</a> with a parallel definition instead.</p>
<div class="editsection" style="float:right;margin-left:5px;">[<a  title="Edit section: REALbasic">edit</a>]</div>
<p><a name="REALbasic" id="REALbasic"></a></p>
<h3>REALbasic</h3>
<p><a href="/wiki/REALbasic.html" title="REALbasic">REALbasic</a> added support for return type covariance in version 5.5. As with Java, the parameter types of the overriding method must be the same.</p>
<div class="editsection" style="float:right;margin-left:5px;">[<a  title="Edit section: Scala">edit</a>]</div>
<p><a name="Scala" id="Scala"></a></p>
<h3>Scala</h3>
<p><a href="/wiki/Scala_%28programming_language%29.html" title="Scala (programming language)">Scala</a> supports both covariance and contravariance.</p>
<div class="editsection" style="float:right;margin-left:5px;">[<a  title="Edit section: Sather">edit</a>]</div>
<p><a name="Sather" id="Sather"></a></p>
<h3>Sather</h3>
<p>So does <a href="/wiki/Sather.html" title="Sather">Sather</a>.</p>
<div class="editsection" style="float:right;margin-left:5px;">[<a  title="Edit section: See also">edit</a>]</div>
<p><a name="See_also" id="See_also"></a></p>
<h2>See also</h2>
<ul>
<li><a href="/wiki/Polymorphism_%28computer_science%29.html" title="Polymorphism (computer science)">polymorphism (computer science)</a></li>
<li><a href="/wiki/Inheritance_%28computer_science%29.html" title="Inheritance (computer science)">inheritance (computer science)</a></li>
</ul>
<div class="editsection" style="float:right;margin-left:5px;">[<a  title="Edit section: External links">edit</a>]</div>
<p><a name="External_links" id="External_links"></a></p>
<h2>External links</h2>
<ul>
<li><a  class="external autonumber" title="http://portal.acm.org/citation.cfm?id=203096&amp;dl=ACM&amp;coll=&amp;CFID=15151515&amp;CFTOKEN=6184618">[1]</a> Covariance and contravariance: conflict without a cause by G. Castagna</li>
<li><a  class="external free" title="http://c2.com/cgi/wiki?ContraVsCoVariance">http://c2.com/cgi/wiki?ContraVsCoVariance</a> (note this article is not updated about C++)</li>
</ul>


<!-- Saved in parser cache with key enwiki:pcache:idhash:1104704-0!1!0!default!!en!2 and timestamp 20060908160411 -->
<div class="printfooter">
Retrieved from "<a </div>
			<div id="catlinks"><p class='catlinks'><a  title="Special:Categories">Categories</a>: <span dir='ltr'><a  title="Category:Object-oriented programming">Object-oriented programming</a></span> | <span dir='ltr'><a  title="Category:Type theory">Type theory</a></span></p></div>			<!-- end content -->
			<div class="visualClear"></div>
		</div>
	</div>
		</div>
		<div id="column-one">
	<div id="p-cactions" class="portlet">
		<h5>Views</h5>
		<ul>
				 <li id="ca-nstab-main" class="selected"><a href="/wiki/Covariance_and_contravariance_%28computer_science%29.html">Article</a></li>
				 <li id="ca-talk"><a >Discussion</a></li>
				 <li id="ca-edit"><a >Edit this page</a></li>
				 <li id="ca-history"><a >History</a></li>
		</ul>
	</div>
	<div class="portlet" id="p-personal">
		<h5>Personal tools</h5>
		<div class="pBody">
			<ul>
				<li id="pt-login"><a >Sign in / create account</a></li>
			</ul>
		</div>
	</div>
	<div class="portlet" id="p-logo">
		<a style="background-image: url(/images/wiki-en.png);" href="/wiki/Main_Page.html" title="Main Page"></a>
	</div>
	<script type="text/javascript"> if (window.isMSIE55) fixalpha(); </script>
		<div class='portlet' id='p-navigation'>
		<h5>Navigation</h5>
		<div class='pBody'>
			<ul>
				<li id="n-mainpage"><a href="/wiki/Main_Page.html">Main Page</a></li>
				<li id="n-portal"><a >Community Portal</a></li>
				<li id="n-Featured-articles"><a >Featured articles</a></li>
				<li id="n-currentevents"><a >Current events</a></li>
				<li id="n-recentchanges"><a >Recent changes</a></li>
				<li id="n-randompage"><a >Random article</a></li>
				<li id="n-help"><a >Help</a></li>
				<li id="n-contact"><a >Contact Wikipedia</a></li>
				<li id="n-sitesupport"><a >Donations</a></li>
			</ul>
		</div>
	</div>
		<div id="p-search" class="portlet">
		<h5><label for="searchInput">Search</label></h5>
		<div id="searchBody" class="pBody">
			<form action="/wiki/Special:Search" id="searchform"><div>
				<input id="searchInput" name="search" type="text" accesskey="f" value="" />
				<input type='submit' name="go" class="searchButton" id="searchGoButton"	value="Go" />&nbsp;
				<input type='submit' name="fulltext" class="searchButton" value="Search" />
			</div></form>
		</div>
	</div>
	<div class="portlet" id="p-tb">
		<h5>Toolbox</h5>
		<div class="pBody">
			<ul>
				<li id="t-whatlinkshere"><a >What links here</a></li>
				<li id="t-recentchangeslinked"><a >Related changes</a></li>
<li id="t-upload"><a >Upload file</a></li>
<li id="t-specialpages"><a >Special pages</a></li>
				<li id="t-print"><a >Printable version</a></li>				<li id="t-permalink"><a >Permanent link</a></li><li id="t-cite"><a >Cite this article</a></li>			</ul>
		</div>
	</div>
	<div id="p-lang" class="portlet">
		<h5>In other languages</h5>
		<div class="pBody">
			<ul>
				<li class="interwiki-de"><a >Deutsch</a></li>
			</ul>
		</div>
	</div>
		</div><!-- end of the left (by default at least) column -->
			<div class="visualClear"></div>
			<div id="footer">
				<div id="f-poweredbyico"><a ><img src="/skins-1.5/common/images/poweredby_mediawiki_88x31.png" alt="MediaWiki" /></a></div>
				<div id="f-copyrightico"><a ><img src="/images/wikimedia-button.png" border="0" alt="Wikimedia Foundation"/></a></div>
			<ul id="f-list">
				<li id="lastmod"> This page was last modified 05:19, 8 September 2006.</li>
				<li id="copyright">All text is available under the terms of the <a class='internal'  title="Wikipedia:Text of the GNU Free Documentation License">GNU Free Documentation License</a>. (See <b><a class='internal'  title="Wikipedia:Copyrights">Copyrights</a></b> for details.) <br /> Wikipedia&reg; is a registered trademark of the Wikimedia Foundation, Inc.<br /></li>
				<li id="privacy"><a  title="wikimedia:Privacy policy">Privacy policy</a></li>
				<li id="about"><a  title="Wikipedia:About">About Wikipedia</a></li>
				<li id="disclaimer"><a  title="Wikipedia:General disclaimer">Disclaimers</a></li>
			</ul>
		</div>
		
	
		<script type="text/javascript">if (window.runOnloadHook) runOnloadHook();</script>
</div>
<!-- Served by srv85 in 0.099 secs. --></body></html>
