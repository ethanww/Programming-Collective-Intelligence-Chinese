<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en" dir="ltr">
	<head>
		<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
		<meta name="keywords" content="Referential transparency,Algorithm,Closure (computer science),Code-improving transformation,Common subexpression elimination,Compiler,Computer keyboard,Correctness,Definite clause grammar,Eiffel programming language,Expression (programming)" />
<link rel="shortcut icon"  />
<link rel="search" type="application/opensearchdescription+xml"  />
<link rel="copyright"  />
		<title>Referential transparency - Wikipedia, the free encyclopedia</title>
		<style type="text/css" media="screen,projection">/*<![CDATA[*/ @import "/skins-1.5/monobook/main.css?9"; /*]]>*/</style>
		<link rel="stylesheet" type="text/css" media="print"  />
		<!--[if lt IE 5.5000]><style type="text/css">@import "/skins-1.5/monobook/IE50Fixes.css";</style><![endif]-->
		<!--[if IE 5.5000]><style type="text/css">@import "/skins-1.5/monobook/IE55Fixes.css";</style><![endif]-->
		<!--[if IE 6]><style type="text/css">@import "/skins-1.5/monobook/IE60Fixes.css";</style><![endif]-->
		<!--[if IE 7]><style type="text/css">@import "/skins-1.5/monobook/IE70Fixes.css?1";</style><![endif]-->
		<!--[if lt IE 7]><script type="text/javascript" src="/skins-1.5/common/IEFixes.js"></script>
		<meta http-equiv="imagetoolbar" content="no" /><![endif]-->
		
		<script type= "text/javascript">
			var skin = "monobook";
			var stylepath = "/skins-1.5";

			var wgArticlePath = "/wiki/$1";
			var wgScriptPath = "/w";
			var wgServer = "http://en.wikipedia.org";
                        
			var wgCanonicalNamespace = "";
			var wgNamespaceNumber = 0;
			var wgPageName = "Referential_transparency";
			var wgTitle = "Referential transparency";
			var wgArticleId = 26526;
			var wgIsArticle = true;
                        
			var wgUserName = null;
			var wgUserLanguage = "en";
			var wgContentLanguage = "en";
		</script>
		                
		<script type="text/javascript" src="/skins-1.5/common/wikibits.js?1"><!-- wikibits js --></script>
		<script type="text/javascript" src="/w/index.php?title=-&amp;action=raw&amp;gen=js"><!-- site js --></script>
		<style type="text/css">/*<![CDATA[*/
@import "/w/index.php?title=MediaWiki:Common.css&usemsgcache=yes&action=raw&ctype=text/css&smaxage=2678400";
@import "/w/index.php?title=MediaWiki:Monobook.css&usemsgcache=yes&action=raw&ctype=text/css&smaxage=2678400";
@import "/w/index.php?title=-&action=raw&gen=css&maxage=2678400";
/*]]>*/</style>
		<!-- Head Scripts -->
		<script type="text/javascript" src="/skins-1.5/common/ajax.js"></script>
	</head>
<body  class="mediawiki ns-0 ltr">
	<div id="globalWrapper">
		<div id="column-content">
	<div id="content">
		<a name="top" id="top"></a>
		<div id="siteNotice"><div style="text-align:right; font-size:80%">Your <b><a  class="extiw" title="wikimedia:Fundraising">continued donations</a></b> keep Wikipedia running!&nbsp;&nbsp;&nbsp;&nbsp;</div>
</div>		<h1 class="firstHeading">Referential transparency</h1>
		<div id="bodyContent">
			<h3 id="siteSub">From Wikipedia, the free encyclopedia</h3>
			<div id="contentSub"></div>
									<div id="jump-to-nav">Jump to: <a >navigation</a>, <a >search</a></div>			<!-- start content -->
			<p>Referential transparency is a property of computer programming languages, essentially stating that any expression may be replaced with its result without changing the behavior of the program.</p>
<table id="toc" class="toc" summary="Contents">
<tr>
<td>
<div id="toctitle">
<h2>Contents</h2>
</div>
<ul>
<li class="toclevel-1"><a ><span class="tocnumber">1</span> <span class="toctext">Definition</span></a></li>
<li class="toclevel-1"><a ><span class="tocnumber">2</span> <span class="toctext">Examples and counterexamples</span></a></li>
<li class="toclevel-1"><a ><span class="tocnumber">3</span> <span class="toctext">Contrast to imperative programming</span></a></li>
<li class="toclevel-1"><a ><span class="tocnumber">4</span> <span class="toctext">Command-Query Separation principle</span></a></li>
<li class="toclevel-1"><a ><span class="tocnumber">5</span> <span class="toctext">Other example</span></a></li>
<li class="toclevel-1"><a ><span class="tocnumber">6</span> <span class="toctext">See also</span></a></li>
</ul>
</td>
</tr>
</table>
<p><script type="text/javascript">
//<![CDATA[
 if (window.showTocToggle) { var tocShowText = "show"; var tocHideText = "hide"; showTocToggle(); } 
//]]>
</script></p>
<div class="editsection" style="float:right;margin-left:5px;">[<a  title="Edit section: Definition">edit</a>]</div>
<p><a name="Definition" id="Definition"></a></p>
<h2>Definition</h2>
<p>An <a href="/wiki/Expression_%28programming%29.html" title="Expression (programming)">expression</a> is said to be <b>referentially transparent</b> if it can be replaced with its value without changing the program (in other words, yielding a program that has the same effects and output on the same input). The opposite term is <b>referentially opaque</b>.</p>
<p>This is almost equivalent to all functions involved in the expression being both:</p>
<ul>
<li><a href="/wiki/Side_effect_%28computer_science%29.html" title="Side effect (computer science)">Side effect</a>-free</li>
<li>a <a href="/wiki/Pure_function.html" title="Pure function">pure function</a></li>
</ul>
<p>(This is not strictly true: you could include an impure function and discard its value.)</p>
<p>This is a cornerstone of <a href="/wiki/Functional_programming.html" title="Functional programming">functional programming</a>, and it allows <a href="/wiki/Memoization.html" title="Memoization">memoization</a> (caching of function values).</p>
<div class="editsection" style="float:right;margin-left:5px;">[<a  title="Edit section: Examples and counterexamples">edit</a>]</div>
<p><a name="Examples_and_counterexamples" id="Examples_and_counterexamples"></a></p>
<h2>Examples and counterexamples</h2>
<p>Arithmetic operations are referentially transparent: <code>5*5</code> can be replaced by <code>25</code>, for instance.</p>
<p>Many functions, particularly most of those in the mathematical sense, are referentially transparent: <code>sin(x)</code> is transparent, since it will always give the same result for any given <code>x</code>.</p>
<p>The c++ expression <code>x++;</code> is not transparent, as it changes the value for <code>x</code>.</p>
<p>In most languages, <code>print( "Hello world" )</code> is not transparent, as replacing it by its value (say, 0) changes the behavior of the program, as "Hello world" isn't printed.</p>
<p><code>today()</code> is not transparent, as if you evaluate it and replace it by its value (say, "Jan 1, 2001"), you don't get the same result as you will if you run it tomorrow.</p>
<div class="editsection" style="float:right;margin-left:5px;">[<a  title="Edit section: Contrast to imperative programming">edit</a>]</div>
<p><a name="Contrast_to_imperative_programming" id="Contrast_to_imperative_programming"></a></p>
<h2>Contrast to imperative programming</h2>
<p>Another term for a referentially transparent function is a <a  class="new" title="Determinate function">determinate function</a>.</p>
<p>If the substitution of an expression with its value is valid only at a certain point in the execution of the program, then the expression is not referentially transparent. The definition and ordering of these <a href="/wiki/Sequence_points.html" title="Sequence points">sequence points</a> are the theoretical foundation of <a href="/wiki/Imperative_programming.html" title="Imperative programming">imperative programming</a>, and part of the semantics of an imperative programming language.</p>
<p>However, because a referentially transparent expression can be evaluated at any time, it is not necessary to define sequence points nor any guarantee of the order of evaluation at all. Programming done without these considerations is called <a href="/wiki/Purely_functional.html" title="Purely functional">purely functional programming</a>.</p>
<p>The chief advantage of writing code in a referentially transparent style is that given an intelligent compiler, <a href="/wiki/Static_code_analysis.html" title="Static code analysis">static code analysis</a> is easier and better <a href="/wiki/Code-improving_transformation.html" title="Code-improving transformation">code-improving transformations</a> are possible automatically. For example, when programming in C, there will be a performance penality for including a call to an expensive function inside a loop, even if the function call could be moved outside of the loop without changing the results of the program. The programmer would be forced to perform manual <a  class="new" title="Code motion">code motion</a> of the call, possibly at the expense of source code readability. However, if the compiler is able to determine that the function call is referentially transparent, it can perform this transformation automatically.</p>
<p>The primary disadvantage of languages which enforce referential transparency is that it makes the expression of operations that naturally fit a sequence-of-steps imperative programing style more awkward and less concise. Such languages often incorporate mechanisms to make these tasks easier while retaining the purely functional quality of the language, such as <a href="/wiki/Definite_clause_grammar.html" title="Definite clause grammar">definite clause grammars</a> and <a href="/wiki/Monad.html" title="Monad">monads</a>.</p>
<p>While in <a href="/wiki/Mathematics.html" title="Mathematics">mathematics</a> all function applications are referentially <a href="/wiki/Transparent.html" title="Transparent">transparent</a>, in programming this is not always the case. For example, take a function that takes no parameters and returns input from the <a href="/wiki/Computer_keyboard.html" title="Computer keyboard">keyboard</a>. A call to this function might be <tt>GetInput()</tt>. The return value of <tt>GetInput()</tt> depends on what the user feels like typing in, so multiple calls to <tt>GetInput()</tt> with identical parameters (the empty list) may return different results.</p>
<p>A more subtle example is that of a function that uses a <a href="/wiki/Global_variable.html" title="Global variable">global variable</a> (or a dynamically <a href="/wiki/Scope_%28programming%29.html" title="Scope (programming)">scoped</a> variable, or a lexical <a href="/wiki/Closure_%28computer_science%29.html" title="Closure (computer science)">closure</a>) to help it compute its results. Since this variable is not passed as a parameter but can be altered, the results of subsequent calls to the function can differ even if the parameters are identical. (In pure <a href="/wiki/Functional_programming.html" title="Functional programming">functional programming</a>, assignment is not allowed; thus a function that uses global (or dynamically scoped) variables is still referentially transparent, since these variables cannot change.)</p>
<p>The importance of referential transparency is that it allows a <a href="/wiki/Programmer.html" title="Programmer">programmer</a> (or <a href="/wiki/Compiler.html" title="Compiler">compiler</a>) to reason about program behavior. This can help in proving <a href="/wiki/Correctness.html" title="Correctness">correctness</a>, finding bugs that could not be found through testing, simplifying an <a href="/wiki/Algorithm.html" title="Algorithm">algorithm</a>, assisting in modifying code without breaking it, or <a href="/wiki/Optimization_%28computer_science%29.html" title="Optimization (computer science)">optimizing</a> code by means of <a href="/wiki/Memoization.html" title="Memoization">memoization</a> or <a href="/wiki/Common_subexpression_elimination.html" title="Common subexpression elimination">common subexpression elimination</a>.</p>
<p>Some <a href="/wiki/Functional_programming.html" title="Functional programming">functional programming</a> languages enforce referential transparency for all functions.</p>
<p>Referential transparency will cause as a side effect that no difference is made or recognised between a reference to a thing and the corresponding thing itself. Without referential transparency, such difference can be easily made and utilized in programs.</p>
<div class="editsection" style="float:right;margin-left:5px;">[<a  title="Edit section: Command-Query Separation principle">edit</a>]</div>
<p><a name="Command-Query_Separation_principle" id="Command-Query_Separation_principle"></a></p>
<h2>Command-Query Separation principle</h2>
<p>The <a href="/wiki/Eiffel_programming_language.html" title="Eiffel programming language">Eiffel method</a>, although based on an imperative programming language, enforces a strict separation between <b>commands</b>, which can produce side effects, and <b>queries</b>, which must be referentially transparent: they return a result but do not change the environment. This rule is known as the <i>Command-Query Separation principle</i> and results in a style that clearly separates the referentially transparent parts. For example, in manipulating lists:</p>
<pre>
my_list.finish        -- Move cursor to the end of the list
value := my_list.item -- Get value at cursor position: referentially transparent
</pre>
<p>This even affects such strongly imperative features as input:</p>
<pre>
my_file.read_integer          -- Get next integer; side effect, but no return value
value := my_file.last_integer -- Get last integer read: referentially transparent
</pre>
<p>Calling <code>last_integer</code> several times in a row is guaranteed to yield the same result each time.</p>
<div class="editsection" style="float:right;margin-left:5px;">[<a  title="Edit section: Other example">edit</a>]</div>
<p><a name="Other_example" id="Other_example"></a></p>
<h2>Other example</h2>
<p>As an example, let's use two functions, one which is referentially opaque, and the other which is referentially transparent:</p>
<pre>
globalValue = 0;
integer function rq(integer x)
begin
  globalValue = globalValue + 1;
  return x + globalValue;
end
integer function rt(integer x)
begin
  return x + 1;
end
</pre>
<p>Now, <code>rt</code> is referentially transparent, which means that <code>rt(x) = rt(x)</code> as long as <code>x</code> is the same value. For instance, <code>rt(6) = rt(6) = 7, rt(4) = rt(3+1) = 5</code>, and so on. However, we can't say any such thing for <code>rq</code> because it uses a global value which it modifies.</p>
<p>So, how is this a bad thing? Well let's say we want to do some reasoning about the following chunk of code:</p>
<pre>
integer p = rq(x) + rq(y) * (rq(x) - rq(x));
</pre>
<p>Now, right off-hand, one would be tempted to simplify this line of code to:</p>
<pre>
integer p = rq(x) + rq(y) * (0) = 
integer p = rq(x) + 0           = 
integer p = rq(x);
</pre>
<p>However, this will not work for <code>rq()</code> because <code>rq(x)</code> does not equal <code>rq(x)</code>! Remember, that the return value of <code>rq</code> is based on a global value which isn't passed in and which gets modified all over the place. This goes against common sense since anything minus itself <i>should</i> be zero.</p>
<p>This however <i>will</i> work for <code>rt</code>, because it is a referentially transparent function.</p>
<p>Therefore we can reason about our code which will lead to more robust programs, the possibility of finding bugs that we couldn't hope to find by testing, and even the possibility of seeing opportunities for <a href="/wiki/Optimization_%28computer_science%29.html" title="Optimization (computer science)">optimization</a>.</p>
<div class="editsection" style="float:right;margin-left:5px;">[<a  title="Edit section: See also">edit</a>]</div>
<p><a name="See_also" id="See_also"></a></p>
<h2>See also</h2>
<ul>
<li><a href="/wiki/Idempotence_%28computer_science%29.html" title="Idempotence (computer science)">Idempotence (computer science)</a></li>
</ul>


<!-- Saved in parser cache with key enwiki:pcache:idhash:26526-0!1!0!default!!en!2 and timestamp 20060906033625 -->
<div class="printfooter">
Retrieved from "<a </div>
			<div id="catlinks"><p class='catlinks'><a  title="Special:Categories">Categories</a>: <span dir='ltr'><a  title="Category:Theoretical computer science">Theoretical computer science</a></span> | <span dir='ltr'><a  title="Category:Philosophical logic">Philosophical logic</a></span></p></div>			<!-- end content -->
			<div class="visualClear"></div>
		</div>
	</div>
		</div>
		<div id="column-one">
	<div id="p-cactions" class="portlet">
		<h5>Views</h5>
		<ul>
				 <li id="ca-nstab-main" class="selected"><a href="/wiki/Referential_transparency.html">Article</a></li>
				 <li id="ca-talk"><a >Discussion</a></li>
				 <li id="ca-edit"><a >Edit this page</a></li>
				 <li id="ca-history"><a >History</a></li>
		</ul>
	</div>
	<div class="portlet" id="p-personal">
		<h5>Personal tools</h5>
		<div class="pBody">
			<ul>
				<li id="pt-login"><a >Sign in / create account</a></li>
			</ul>
		</div>
	</div>
	<div class="portlet" id="p-logo">
		<a style="background-image: url(/images/wiki-en.png);" href="/wiki/Main_Page.html" title="Main Page"></a>
	</div>
	<script type="text/javascript"> if (window.isMSIE55) fixalpha(); </script>
		<div class='portlet' id='p-navigation'>
		<h5>Navigation</h5>
		<div class='pBody'>
			<ul>
				<li id="n-mainpage"><a href="/wiki/Main_Page.html">Main Page</a></li>
				<li id="n-portal"><a >Community Portal</a></li>
				<li id="n-Featured-articles"><a >Featured articles</a></li>
				<li id="n-currentevents"><a >Current events</a></li>
				<li id="n-recentchanges"><a >Recent changes</a></li>
				<li id="n-randompage"><a >Random article</a></li>
				<li id="n-help"><a >Help</a></li>
				<li id="n-contact"><a >Contact Wikipedia</a></li>
				<li id="n-sitesupport"><a >Donations</a></li>
			</ul>
		</div>
	</div>
		<div id="p-search" class="portlet">
		<h5><label for="searchInput">Search</label></h5>
		<div id="searchBody" class="pBody">
			<form action="/wiki/Special:Search" id="searchform"><div>
				<input id="searchInput" name="search" type="text" accesskey="f" value="" />
				<input type='submit' name="go" class="searchButton" id="searchGoButton"	value="Go" />&nbsp;
				<input type='submit' name="fulltext" class="searchButton" value="Search" />
			</div></form>
		</div>
	</div>
	<div class="portlet" id="p-tb">
		<h5>Toolbox</h5>
		<div class="pBody">
			<ul>
				<li id="t-whatlinkshere"><a >What links here</a></li>
				<li id="t-recentchangeslinked"><a >Related changes</a></li>
<li id="t-upload"><a >Upload file</a></li>
<li id="t-specialpages"><a >Special pages</a></li>
				<li id="t-print"><a >Printable version</a></li>				<li id="t-permalink"><a >Permanent link</a></li><li id="t-cite"><a >Cite this article</a></li>			</ul>
		</div>
	</div>
	<div id="p-lang" class="portlet">
		<h5>In other languages</h5>
		<div class="pBody">
			<ul>
				<li class="interwiki-de"><a >Deutsch</a></li>
				<li class="interwiki-ru"><a >Русский</a></li>
				<li class="interwiki-ja"><a >日本語</a></li>
			</ul>
		</div>
	</div>
		</div><!-- end of the left (by default at least) column -->
			<div class="visualClear"></div>
			<div id="footer">
				<div id="f-poweredbyico"><a ><img src="/skins-1.5/common/images/poweredby_mediawiki_88x31.png" alt="MediaWiki" /></a></div>
				<div id="f-copyrightico"><a ><img src="/images/wikimedia-button.png" border="0" alt="Wikimedia Foundation"/></a></div>
			<ul id="f-list">
				<li id="lastmod"> This page was last modified 01:16, 31 August 2006.</li>
				<li id="copyright">All text is available under the terms of the <a class='internal'  title="Wikipedia:Text of the GNU Free Documentation License">GNU Free Documentation License</a>. (See <b><a class='internal'  title="Wikipedia:Copyrights">Copyrights</a></b> for details.) <br /> Wikipedia&reg; is a registered trademark of the Wikimedia Foundation, Inc.<br /></li>
				<li id="privacy"><a  title="wikimedia:Privacy policy">Privacy policy</a></li>
				<li id="about"><a  title="Wikipedia:About">About Wikipedia</a></li>
				<li id="disclaimer"><a  title="Wikipedia:General disclaimer">Disclaimers</a></li>
			</ul>
		</div>
		
	
		<script type="text/javascript">if (window.runOnloadHook) runOnloadHook();</script>
</div>
<!-- Served by srv119 in 0.107 secs. --></body></html>
