<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en" dir="ltr">
	<head>
		<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
		<meta name="keywords" content="Architecture of the Windows NT operating system line,16-bit,64-bit,Access control lists,Active Directory,Alpha blending,Asynchronous I/O,Bus,Class (computer science),Compaq,Computer hardware" />
<link rel="shortcut icon"  />
<link rel="search" type="application/opensearchdescription+xml"  />
<link rel="copyright"  />
		<title>Architecture of the Windows NT operating system line - Wikipedia, the free encyclopedia</title>
		<style type="text/css" media="screen,projection">/*<![CDATA[*/ @import "/skins-1.5/monobook/main.css?9"; /*]]>*/</style>
		<link rel="stylesheet" type="text/css" media="print"  />
		<!--[if lt IE 5.5000]><style type="text/css">@import "/skins-1.5/monobook/IE50Fixes.css";</style><![endif]-->
		<!--[if IE 5.5000]><style type="text/css">@import "/skins-1.5/monobook/IE55Fixes.css";</style><![endif]-->
		<!--[if IE 6]><style type="text/css">@import "/skins-1.5/monobook/IE60Fixes.css";</style><![endif]-->
		<!--[if IE 7]><style type="text/css">@import "/skins-1.5/monobook/IE70Fixes.css?1";</style><![endif]-->
		<!--[if lt IE 7]><script type="text/javascript" src="/skins-1.5/common/IEFixes.js"></script>
		<meta http-equiv="imagetoolbar" content="no" /><![endif]-->
		
		<script type= "text/javascript">
			var skin = "monobook";
			var stylepath = "/skins-1.5";

			var wgArticlePath = "/wiki/$1";
			var wgScriptPath = "/w";
			var wgServer = "http://en.wikipedia.org";
                        
			var wgCanonicalNamespace = "";
			var wgNamespaceNumber = 0;
			var wgPageName = "Architecture_of_the_Windows_NT_operating_system_line";
			var wgTitle = "Architecture of the Windows NT operating system line";
			var wgArticleId = 1942523;
			var wgIsArticle = true;
                        
			var wgUserName = null;
			var wgUserLanguage = "en";
			var wgContentLanguage = "en";
		</script>
		                
		<script type="text/javascript" src="/skins-1.5/common/wikibits.js?1"><!-- wikibits js --></script>
		<script type="text/javascript" src="/w/index.php?title=-&amp;action=raw&amp;gen=js"><!-- site js --></script>
		<style type="text/css">/*<![CDATA[*/
@import "/w/index.php?title=MediaWiki:Common.css&usemsgcache=yes&action=raw&ctype=text/css&smaxage=2678400";
@import "/w/index.php?title=MediaWiki:Monobook.css&usemsgcache=yes&action=raw&ctype=text/css&smaxage=2678400";
@import "/w/index.php?title=-&action=raw&gen=css&maxage=2678400";
/*]]>*/</style>
		<!-- Head Scripts -->
		<script type="text/javascript" src="/skins-1.5/common/ajax.js"></script>
	</head>
<body  class="mediawiki ns-0 ltr">
	<div id="globalWrapper">
		<div id="column-content">
	<div id="content">
		<a name="top" id="top"></a>
		<div id="siteNotice"><div style="text-align:right; font-size:80%">Your <b><a  class="extiw" title="wikimedia:Fundraising">continued donations</a></b> keep Wikipedia running!&nbsp;&nbsp;&nbsp;&nbsp;</div>
</div>		<h1 class="firstHeading">Architecture of the Windows NT operating system line</h1>
		<div id="bodyContent">
			<h3 id="siteSub">From Wikipedia, the free encyclopedia</h3>
			<div id="contentSub"></div>
									<div id="jump-to-nav">Jump to: <a >navigation</a>, <a >search</a></div>			<!-- start content -->
			<div style="right:10px; display:none;" class="metadata topicon" id="featured-star">
<div style="position: relative; width: 14px; height: 14px; overflow: hidden">
<div style="position: absolute; top: 0px; left: 0px; font-size: 100px; overflow: hidden; line-height: 100px; z-index: 3"><a  title="Wikipedia:Featured articles"><span title="This is a featured article. Click here for more information.">&#160;&#160;&#160;</span></a></div>
<div style="position: absolute; top: 0px; left: 0px; z-index: 2"><a  class="image" title="This is a featured article. Click here for more information."><img src="http://upload.wikimedia.org/wikipedia/en/6/60/LinkFA-star.png" alt="This is a featured article. Click here for more information." width="14" height="14" longdesc="/wiki/Image:LinkFA-star.png" /></a></div>
</div>
</div>
<div class="thumb tright">
<div style="width:277px;"><a  class="internal" title="The Windows NT operating system family's architecture consists of two layers (user mode and kernel mode), with many different modules within both of these layers."><img src="http://upload.wikimedia.org/wikipedia/en/thumb/5/5d/Windows_2000_architecture.svg/275px-Windows_2000_architecture.svg.png" alt="The Windows NT operating system family's architecture consists of two layers (user mode and kernel mode), with many different modules within both of these layers." width="275" height="353" longdesc="/wiki/Image:Windows_2000_architecture.svg" /></a>
<div class="thumbcaption">
<div class="magnify" style="float:right"><a  class="internal" title="Enlarge"><img src="/skins-1.5/common/images/magnify-clip.png" width="15" height="11" alt="Enlarge" /></a></div>
The Windows NT operating system family's architecture consists of two layers (user mode and kernel mode), with many different modules within both of these layers.</div>
</div>
</div>
<p><a href="/wiki/Windows_2000.html" title="Windows 2000">Windows 2000</a>, <a href="/wiki/Windows_XP.html" title="Windows XP">Windows XP</a>, <a href="/wiki/Windows_Server_2003.html" title="Windows Server 2003">Windows Server 2003</a>, and <a href="/wiki/Windows_Vista.html" title="Windows Vista">Windows Vista</a> are all part of the <a href="/wiki/Windows_NT.html" title="Windows NT">Windows NT</a> family of Microsoft operating systems. They are all <a href="/wiki/Preemption_%28computing%29.html" title="Preemption (computing)">preemptive</a>, <a href="/wiki/Reentrant.html" title="Reentrant">reentrant</a> <a href="/wiki/Operating_system.html" title="Operating system">operating systems</a>, which have been designed to work with either <a href="/wiki/Uniprocessor.html" title="Uniprocessor">uniprocessor</a>- or <a href="/wiki/Symmetrical_multi_processor.html" title="Symmetrical multi processor">symmetrical multi processor</a> (SMP)-based <a href="/wiki/Intel.html" title="Intel">Intel</a> <a href="/wiki/X86.html" title="X86">x86</a> computers. To process <a href="/wiki/Input/output.html" title="Input/output">input/output</a> (I/O) requests it uses <a  class="new" title="Packet-driven I/O">packet-driven I/O</a> which utilises I/O request <a href="/wiki/Packet.html" title="Packet">packets</a> (IRPs) and <a href="/wiki/Asynchronous_I/O.html" title="Asynchronous I/O">asynchronous I/O</a>. Starting with <a href="/wiki/Windows_XP.html" title="Windows XP">Windows XP</a>, Microsoft began building in 64-bit support into their operating systems — before this their operating systems were based on a 32-bit model. The <b>architecture of the Windows NT operating system line</b> is highly modular, and consists of two main layers: a <a href="/wiki/User_mode.html" title="User mode">user mode</a> and a <a href="/wiki/Kernel_mode.html" title="Kernel mode">kernel mode</a>. Programs and subsystems in user mode are limited in terms of what system resources they have access to, while the kernel mode has unrestricted access to the system memory and external devices. The <a href="/wiki/Kernel.html" title="Kernel">kernels</a> of the operating systems in this line are all known as <a href="/wiki/Hybrid_kernel.html" title="Hybrid kernel">hybrid kernels</a> - although it is worth noting that this term is disputed, with the claim that the kernel is essentially a <a href="/wiki/Monolithic_kernel.html" title="Monolithic kernel">monolithic kernel</a> that is structured somewhat like a <a href="/wiki/Microkernel.html" title="Microkernel">microkernel</a>. The architecture is comprised of a hybrid kernel, <a href="/wiki/Hardware_Abstraction_Layer.html" title="Hardware Abstraction Layer">Hardware Abstraction Layer</a> (HAL), drivers, and <a  title="">Executive</a>, which all exist in kernel mode <span class="reference"><sup id="ref_MCSEWin2kServerArch" class="plainlinksneverexpand"><a  class="external autonumber" title="http://en.wikipedia.org/wiki/Architecture_of_the_Windows_NT_operating_system_line#endnote_MCSEWin2kServerArch">[1]</a></sup></span>. The higher-level services being implemented by the <a  title="">executive</a>.</p>
<p>User mode in the Windows NT line is made of subsystems capable of passing I/O requests to the appropriate kernel mode <a href="/wiki/Software_driver.html" title="Software driver">software drivers</a> by using the I/O manager. Two subsystems make up the user mode layer of Windows 2000: the Environment subsystem (runs applications written for many different types of operating systems), and the Integral subsystem (operates system specific functions on behalf of the environment subsystem). Kernel mode in Windows 2000 has full access to the hardware and system resources of the computer. The kernel mode stops user mode services and applications from accessing critical areas of the operating system that they should not have access to.</p>
<p>The Executive interfaces with all the user mode subsystems. It deals with I/O, object management, security and process management. The kernel sits between the <a href="/wiki/Hardware_Abstraction_Layer.html" title="Hardware Abstraction Layer">Hardware Abstraction Layer</a> and the Executive to provide multiprocessor synchronization, thread and interrupt scheduling and dispatching, and trap handling and exception dispatching. The kernel is also responsible for initialising device drivers at bootup. Kernel mode drivers exist in three levels: highest level drivers, intermediate drivers and low level drivers. <a href="/wiki/Windows_Driver_Model.html" title="Windows Driver Model">Windows Driver Model</a> (WDM) exists in the intermediate layer and was mainly designed to be binary and source compatible between <a href="/wiki/Windows_98.html" title="Windows 98">Windows 98</a> and <a href="/wiki/Windows_2000.html" title="Windows 2000">Windows 2000</a>. The lowest level drivers are either legacy <a href="/wiki/Windows_NT.html" title="Windows NT">Windows NT</a> device drivers that control a device directly or can be a <a href="/wiki/PnP.html" title="PnP">PnP</a> hardware bus.</p>
<table id="toc" class="toc" summary="Contents">
<tr>
<td>
<div id="toctitle">
<h2>Contents</h2>
</div>
<ul>
<li class="toclevel-1"><a ><span class="tocnumber">1</span> <span class="toctext">User mode</span></a></li>
<li class="toclevel-1"><a ><span class="tocnumber">2</span> <span class="toctext">Kernel mode</span></a>
<ul>
<li class="toclevel-2"><a ><span class="tocnumber">2.1</span> <span class="toctext">Executive</span></a></li>
<li class="toclevel-2"><a ><span class="tocnumber">2.2</span> <span class="toctext">Kernel &amp; kernel-mode drivers</span></a></li>
<li class="toclevel-2"><a ><span class="tocnumber">2.3</span> <span class="toctext">Hardware abstraction layer</span></a></li>
</ul>
</li>
<li class="toclevel-1"><a ><span class="tocnumber">3</span> <span class="toctext">Notes &amp; references</span></a></li>
<li class="toclevel-1"><a ><span class="tocnumber">4</span> <span class="toctext">External links</span></a></li>
</ul>
</td>
</tr>
</table>
<p><script type="text/javascript">
//<![CDATA[
 if (window.showTocToggle) { var tocShowText = "show"; var tocHideText = "hide"; showTocToggle(); } 
//]]>
</script></p>
<div class="editsection" style="float:right;margin-left:5px;">[<a  title="Edit section: User mode">edit</a>]</div>
<p><a name="User_mode" id="User_mode"></a></p>
<h2>User mode</h2>
<p>The user mode is made up of subsystems which can pass I/O requests to the appropriate kernel mode drivers via the I/O manager (which exists in kernel mode). Two subsystems make up the user mode layer of Windows 2000: the <i>Environment subsystem</i> and the <i>Integral subsystem</i>.</p>
<p>The environment subsystem was designed to run applications written for many different types of operating systems. None of the environment subsystems can directly access hardware, and must request access to memory resources through the Virtual Memory Manager that runs in kernel mode. Also, applications run at a lower priority than kernel mode processes. Currently, there are three main environment subsystems: the Win32 subsystem, an <a href="/wiki/OS/2.html" title="OS/2">OS/2</a> subsystem and a <a href="/wiki/POSIX.html" title="POSIX">POSIX</a> subsystem.</p>
<p>The <a href="/wiki/Win32.html" title="Win32">Win32</a> environment subsystem can run 32-bit Windows applications. It contains the console as well as text window support, shutdown and hard-error handling for all other environment subsystems. It also supports <a href="/wiki/Virtual_DOS_Machine.html" title="Virtual DOS Machine">Virtual DOS Machines</a> (VDMs), which allow <a href="/wiki/MS-DOS.html" title="MS-DOS">MS-DOS</a> and <a href="/wiki/16-bit.html" title="16-bit">16-bit</a> <a href="/wiki/Windows_3.x.html" title="Windows 3.x">Windows 3.x</a> (<a href="/wiki/Win16.html" title="Win16">Win16</a>) applications to be run on Windows. There is a specific MS-DOS VDM which runs in its own address space and which emulates an <a href="/wiki/Intel_80486.html" title="Intel 80486">Intel 80486</a> running MS-DOS 5. Win16 programs, however, run in a Win16 VDM. Each program, by default, runs in the same process, thus using the same address space, and the Win16 VDM gives each program its own <a href="/wiki/Thread_%28computer_science%29.html" title="Thread (computer science)">thread</a> to run on. However, Windows 2000 does allow users to run a Win16 program in a separate Win16 VDM, which allows the program to be preemptively multitasked as Windows 2000 will pre-empt the whole VDM process, which only contains one running application. The OS/2 environment subsystem supports 16-bit character-based OS/2 applications and emulates OS/2 1.x, but not 2.x or later OS/2 applications. The POSIX environment subsystem supports applications that are strictly written to either the POSIX.1 standard or the related <a href="/wiki/ISO.html" title="ISO">ISO</a>/<a href="/wiki/IEC.html" title="IEC">IEC</a> standards.</p>
<p>The integral subsystem looks after operating system specific functions on behalf of the <a  title="">environment subsystem</a>. It consists of a <i>security subsystem</i>, a <i>workstation service</i> and a <i>server service</i>. The security subsystem deals with security tokens, grants or denies access to user accounts based on resource permissions, handles logon requests and initiates logon authentication, and determines which system resources need to be audited by Windows 2000. It also looks after <a href="/wiki/Active_Directory.html" title="Active Directory">Active Directory</a>. The workstation service is an API to the network redirector, which provides the computer access to the network. The server service is an API that allows the computer to provide network services.</p>
<div class="editsection" style="float:right;margin-left:5px;">[<a  title="Edit section: Kernel mode">edit</a>]</div>
<p><a name="Kernel_mode" id="Kernel_mode"></a></p>
<h2>Kernel mode</h2>
<p>Windows 2000 <a href="/wiki/Kernel_mode.html" title="Kernel mode">kernel mode</a> has full access to the hardware and system resources of the computer and runs code in a protected memory area. It controls access to scheduling, thread prioritisation, memory management and the interaction with hardware. The kernel mode stops user mode services and applications from accessing critical areas of the operating system that they should not have access to as user mode processes ask the kernel mode to perform such operations on its behalf.</p>
<p>Kernel mode consists of <i>executive services</i>, which is itself made up on many modules that do specific tasks, <i>kernel drivers</i>, a <i><a href="/wiki/Kernel.html" title="Kernel">kernel</a></i> and a <i>Hardware Abstraction Layer</i>, or HAL.</p>
<div class="editsection" style="float:right;margin-left:5px;">[<a  title="Edit section: Executive">edit</a>]</div>
<p><a name="Executive" id="Executive"></a></p>
<h3>Executive</h3>
<p>The Executive interfaces with all the user mode subsystems. It deals with I/O, object management, security and process management. It contains various components, including the <i>I/O Manager</i>, the <i>Security Reference Monitor</i>, the <i>Object Manager</i>, the <i>IPC Manager</i>, the <i>Virtual Memory Manager</i> (VMM), a <i>PnP Manager</i> and <i>Power Manager</i>, as well as a <i>Window Manager</i> which works in conjunction with the Windows <i><a href="/wiki/Graphics_Device_Interface.html" title="Graphics Device Interface">Graphics Device Interface</a></i> (GDI). Each of these components exports a kernel-only support routine allows other components to communicate with one another. Grouped together, the components can be called <i>executive services</i>. No executive component has access to the internal routines of any other executive component.</p>
<div class="thumb tright">
<div style="width:182px;"><a  class="internal" title="Each object in Windows 2000 exists in its own namespace. This is a screenshot from SysInternals' WinObj"><img src="http://upload.wikimedia.org/wikipedia/en/thumb/1/10/Winobj.PNG/180px-Winobj.PNG" alt="Each object in Windows 2000 exists in its own namespace. This is a screenshot from SysInternals' WinObj" width="180" height="124" longdesc="/wiki/Image:Winobj.PNG" /></a>
<div class="thumbcaption">
<div class="magnify" style="float:right"><a  class="internal" title="Enlarge"><img src="/skins-1.5/common/images/magnify-clip.png" width="15" height="11" alt="Enlarge" /></a></div>
Each object in Windows 2000 exists in its own <a href="/wiki/Namespace.html" title="Namespace">namespace</a>. This is a screenshot from <i>SysInternals'</i> <span class="plainlinksneverexpand"><a  class="external text" title="http://www.sysinternals.com/ntw2k/freeware/winobj.shtml">WinObj</a></span></div>
</div>
</div>
<p>The <b>object manager</b> is a special executive subsystem that all other executive subsystems must pass through to gain access to Windows 2000 resources — essentially making it a resource management infrastructure service. The object manager is used to reduce the duplication of object resource management functionality in other executive subsystems, which could potentially lead to bugs and make development of Windows 2000 harder <span class="reference"><sup id="ref_RussinovichObjectManager_Intro" class="plainlinksneverexpand"><a  class="external autonumber" title="http://en.wikipedia.org/wiki/Architecture_of_the_Windows_NT_operating_system_line#endnote_RussinovichObjectManager_Intro">[2]</a></sup></span>. To the object manager, each resource is an object, whether that resource is a physical resource (such as a file system or peripheral) or a logical resource (such as a file). Each object has a structure or <i>object type</i> that the object manager must know about. When another executive subsystem requests the creation of an object, they send that request to the object manager which creates an empty object structure which the requesting executive subsystem then fills in <span class="reference"><sup id="ref_RussinovichObjectManager_ObjectTypes" class="plainlinksneverexpand"><a  class="external autonumber" title="http://en.wikipedia.org/wiki/Architecture_of_the_Windows_NT_operating_system_line#endnote_RussinovichObjectManager_ObjectTypes">[3]</a></sup></span>. Object types define the object procedures and any data specific to the object. In this way, the object manager allows Windows 2000 to be an <a href="/wiki/Object_oriented.html" title="Object oriented">object oriented</a> operating system, as object types can be thought of as <a href="/wiki/Class_%28computer_science%29.html" title="Class (computer science)">classes</a> that define <a href="/wiki/Object_%28computer_science%29.html" title="Object (computer science)">objects</a>.</p>
<p>Each instance of an object that is created stores its name, parameters that are passed to the object creation function, security attributes and a pointer to its object type. The object also contains an object close procedure and a reference count to tell the object manager how many other objects in the system reference that object and thereby determines whether the object can be destroyed when a close request is sent to it <span class="reference"><sup id="ref_RussinovichObjectManager_Objects" class="plainlinksneverexpand"><a  class="external autonumber" title="http://en.wikipedia.org/wiki/Architecture_of_the_Windows_NT_operating_system_line#endnote_RussinovichObjectManager_Objects">[4]</a></sup></span>. Every object exists in a hierarchical object <a href="/wiki/Namespace.html" title="Namespace">namespace</a>.</p>
<p>Further executive subsystems are the following:</p>
<ul>
<li><b>I/O Manager:</b> allows devices to communicate with user-mode subsystems. It translates user-mode read and write commands in read or write IRPs which it passes to device drivers. It accepts <a href="/wiki/File_system.html" title="File system">file system</a> I/O requests and translates them into device specific calls, and can incorporate low-level device drivers that directly manipulate hardware to either read input or write output. It also includes a cache manager to improve disk performance by caching read requests and write to the disk in the background</li>
<li><b>Security Reference Monitor (SRM):</b> the primary authority for enforcing the security rules of the security integral subsystem <span class="reference"><sup id="ref_Win2kResourceKitActiveDirectory" class="plainlinksneverexpand"><a  class="external autonumber" title="http://en.wikipedia.org/wiki/Architecture_of_the_Windows_NT_operating_system_line#endnote_Win2kResourceKitActiveDirectory">[5]</a></sup></span>. It determines whether an object or resource can be accessed, via the use of <a href="/wiki/Access_control_lists.html" title="Access control lists">access control lists</a> (ACLs), which are themselves made up of access control entries (ACEs). ACEs contain a security identifier (SID) and a list of operations that the ACE gives a select group of trustees — a user account, group account, or logon session <span class="reference"><sup id="ref_MSDNTrusteeDefinition" class="plainlinksneverexpand"><a  class="external autonumber" title="http://en.wikipedia.org/wiki/Architecture_of_the_Windows_NT_operating_system_line#endnote_MSDNTrusteeDefinition">[6]</a></sup></span> — permission (allow, deny, or audit) to that resource. <span class="reference"><sup id="ref_SiyanSecurityReferenceMonitor" class="plainlinksneverexpand"><a  class="external autonumber" title="http://en.wikipedia.org/wiki/Architecture_of_the_Windows_NT_operating_system_line#endnote_SiyanSecurityReferenceMonitor">[7]</a></sup></span> <span class="reference"><sup id="ref_MSDNACEDefinition" class="plainlinksneverexpand"><a  class="external autonumber" title="http://en.wikipedia.org/wiki/Architecture_of_the_Windows_NT_operating_system_line#endnote_MSDNACEDefinition">[8]</a></sup></span></li>
<li><b>IPC Manager:</b> short for <a href="/wiki/Interprocess_Communication.html" title="Interprocess Communication">Interprocess Communication</a> Manager, this manages the communication between clients (the environment subsystem) and servers (components of the Executive). It can use two facilities: the <i>Local Procedure Call</i> (LPC) facility (clients and servers on the one computer) and the <i><a href="/wiki/Remote_Procedure_Call.html" title="Remote Procedure Call">Remote Procedure Call</a></i> (RPC) facility (where clients and servers are situated on different computers. Microsoft has had significant security issues with the RPC facility <span class="reference"><sup id="ref_RPCVulnerabilities" class="plainlinksneverexpand"><a  class="external autonumber" title="http://en.wikipedia.org/wiki/Architecture_of_the_Windows_NT_operating_system_line#endnote_RPCVulnerabilities">[9]</a></sup></span>.</li>
<li><b>Virtual Memory Manager:</b> manages <a href="/wiki/Virtual_memory.html" title="Virtual memory">virtual memory</a>, allowing Windows 2000 to use the <a href="/wiki/Hard_disk.html" title="Hard disk">hard disk</a> as a <a href="/wiki/Primary_storage.html" title="Primary storage">primary storage</a> device (although strictly speaking it is <a href="/wiki/Secondary_storage.html" title="Secondary storage">secondary storage</a>). It controls the <a href="/wiki/Paging.html" title="Paging">paging</a> of memory in and out of physical memory to disk storage.</li>
<li><b>Process Manager:</b> handles <a href="/wiki/Process_%28computing%29.html" title="Process (computing)">process</a> and <a href="/wiki/Thread_%28computer_science%29.html" title="Thread (computer science)">thread</a> creation and termination</li>
<li><b>PnP Manager:</b> handles <a href="/wiki/Plug_and_Play.html" title="Plug and Play">Plug and Play</a> and supports device detection and installation at boot time. It also has the responsibility to stop and start devices on demand — sometimes this happens when a bus gains a new device and needs to have a device driver loaded to support that device. Both <a href="/wiki/FireWire.html" title="FireWire">FireWire</a> and <a href="/wiki/Universal_Serial_Bus.html" title="Universal Serial Bus">USB</a> are <a href="/wiki/Hot-swappable.html" title="Hot-swappable">hot-swappable</a> and require the services of the PnP Manager to load, stop and start devices. The PnP manager interfaces with the HAL, the rest of the executive (as necessary) and with device drivers.</li>
<li><b>Power Manager:</b> the power manager deals with power events and generates power IRPs. It coordinates these power events when several devices send a request to be turned off it determines the best way of doing this.</li>
<li>The display system has been moved from user mode into the kernel mode as a device driver contained in the file <i>Win32k.sys</i>. There are two components in this device driver — the Window Manager and the GDI:
<ul>
<li><b>Window Manager:</b> responsible for drawing windows and menus. It controls the way that output is painted to the screen and handles input events (such as from the <a href="/wiki/Computer_keyboard.html" title="Computer keyboard">keyboard</a> and <a href="/wiki/Computer_mouse.html" title="Computer mouse">mouse</a>), then passes messages to the applications that need to receive this input</li>
<li><b>GDI:</b> the <a href="/wiki/Graphics_Device_Interface.html" title="Graphics Device Interface">Graphics Device Interface</a> is responsible for tasks such as drawing <a href="/wiki/Line_%28mathematics%29.html" title="Line (mathematics)">lines</a> and <a href="/wiki/Curve.html" title="Curve">curves</a>, rendering <a href="/wiki/Font.html" title="Font">fonts</a> and handling <a href="/wiki/Palette_%28computing%29.html" title="Palette (computing)">palettes</a>. Windows 2000 introduced native <a href="/wiki/Alpha_blending.html" title="Alpha blending">alpha blending</a> into the GDI.</li>
</ul>
</li>
</ul>
<div class="editsection" style="float:right;margin-left:5px;">[<a  title="Edit section: Kernel &amp; kernel-mode drivers">edit</a>]</div>
<p><a name="Kernel_.26_kernel-mode_drivers" id="Kernel_.26_kernel-mode_drivers"></a></p>
<h3>Kernel &amp; kernel-mode drivers</h3>
<p>The kernel sits between the HAL and the Executive and provides multiprocessor synchronization, thread and interrupt scheduling and dispatching, and trap handling and exception dispatching. The kernel often interfaces with the process manager. <span class="reference"><sup id="ref_InsideWin2kChap2" class="plainlinksneverexpand"><a  class="external autonumber" title="http://en.wikipedia.org/wiki/Architecture_of_the_Windows_NT_operating_system_line#endnote_InsideWin2kChap2">[10]</a></sup></span> The kernel is also responsible for initialising device drivers at bootup that are necessary to get the operating system up and running.</p>
<p>Windows 2000 uses kernel-mode <a href="/wiki/Device_driver.html" title="Device driver">device drivers</a> to enable it to interact with <a href="/wiki/Computer_hardware.html" title="Computer hardware">hardware devices</a>. Each of the drivers has well defined system routines and internal routines that it exports to the rest of the operating system. All devices are seen by user mode code as a file object in the I/O manager, though to the I/O manager itself the devices are seen as device objects, which it defines as either file, device or driver objects. Kernel mode drivers exist in three levels: highest level drivers, intermediate drivers and low level drivers. The highest level drivers, such as file system drivers for <a href="/wiki/File_Allocation_Table.html" title="File Allocation Table">FAT</a> and <a href="/wiki/NTFS.html" title="NTFS">NTFS</a>, rely on intermediate drivers. Intermediate drivers consist of function drivers — or main driver for a device — that are optionally sandwiched between lower and higher level filter drivers. The function driver then relies on a bus driver — or a driver that services a <a href="/wiki/Bus.html" title="Bus">bus</a> controller, adapter, or bridge — which can have an optional bus filter driver that sits between itself and the function driver. Intermediate drivers rely on the lowest level drivers to function. The <a href="/wiki/Windows_Driver_Model.html" title="Windows Driver Model">Windows Driver Model</a> (WDM) exists in the intermediate layer. The lowest level drivers are either legacy Windows NT device drivers that control a device directly or can be a PnP hardware bus. These lower level drivers directly control hardware and do not rely on any other drivers.</p>
<div class="editsection" style="float:right;margin-left:5px;">[<a  title="Edit section: Hardware abstraction layer">edit</a>]</div>
<p><a name="Hardware_abstraction_layer" id="Hardware_abstraction_layer"></a></p>
<h3>Hardware abstraction layer</h3>
<p>The Windows 2000 <a href="/wiki/Hardware_Abstraction_Layer.html" title="Hardware Abstraction Layer">Hardware Abstraction Layer</a>, or HAL, is a layer between the physical hardware of the computer and the rest of the operating system. It was designed to hide differences in hardware and therefore provide a consistent platform on which applications may run. The HAL includes hardware specific code that controls I/O interfaces, <a href="/wiki/Interrupt_controller.html" title="Interrupt controller">interrupt controllers</a> and multiple processors.</p>
<p>Windows 2000 was designed to support the <a href="/wiki/64-bit.html" title="64-bit">64-bit</a> <a href="/wiki/DEC_Alpha.html" title="DEC Alpha">DEC Alpha</a>. After <a href="/wiki/Compaq.html" title="Compaq">Compaq</a> announced they would discontinue support of the processor, Microsoft stopped releasing tests build of Windows 2000 for AXP to the public, stopping with beta 3. Development of Windows on the Alpha continued internally in order to continue to have a 64-bit architecture development model ready until the wider availability of the Intel <a href="/wiki/Itanium.html" title="Itanium">Itanium</a> <a href="/wiki/IA-64.html" title="IA-64">IA-64</a> architecture. The HAL now only supports hardware that is compatible with the <a href="/wiki/Intel.html" title="Intel">Intel</a> <a href="/wiki/X86.html" title="X86">x86</a> architecture.</p>
<div class="editsection" style="float:right;margin-left:5px;">[<a  title="Edit section: Notes &amp; references">edit</a>]</div>
<p><a name="Notes_.26_references" id="Notes_.26_references"></a></p>
<h2>Notes &amp; references</h2>
<div class="references-small" style="-moz-column-count:2; column-count:2;">
<ol>
<li><cite id="endnote_MCSEWin2kServerArch" style="font-style: normal;"><a  title=""><b>↑</b></a></cite>&#160; <i>MCSE Exam 70-215, Microsoft Windows 2000 Server</i>. Chapter 1, Introduction to Microsoft Windows 2000, pg 7-18.</li>
<li><cite id="endnote_RussinovichObjectManager_Intro" style="font-style: normal;"><a  title=""><b>↑</b></a></cite>&#160; <a href="/wiki/Mark_Russinovich.html" title="Mark Russinovich">Mark Russinovich</a> (October 1997). <i>Inside NT's Object Manager</i>. Introduction.</li>
<li><cite id="endnote_RussinovichObjectManager_ObjectTypes" style="font-style: normal;"><a  title=""><b>↑</b></a></cite>&#160; Mark Russinovich (October 1997). <i>Inside NT's Object Manager</i>. "Object Types".</li>
<li><cite id="endnote_RussinovichObjectManager_Objects" style="font-style: normal;"><a  title=""><b>↑</b></a></cite>&#160; Mark Russinovich (October 1997). <i>Inside NT's Object Manager</i>. "Objects".</li>
<li><cite id="endnote_Win2kResourceKitActiveDirectory" style="font-style: normal;"><a  title=""><b>↑</b></a></cite>&#160; <i>Microsoft</i>. "<a  class="external text" title="http://www.microsoft.com/resources/documentation/Windows/2000/server/reskit/en-us/Default.asp?url=/resources/documentation/Windows/2000/server/reskit/en-us/distrib/dsbg_dat_brlr.asp">Active Directory Data Storage</a>".</li>
<li><cite id="endnote_MSDNTrusteeDefinition" style="font-style: normal;"><a  title=""><b>↑</b></a></cite>&#160; <i>MSDN</i>. <a  class="external text" title="http://msdn.microsoft.com/library/en-us/secgloss/security/t_gly.asp?FRAME=true#_security_trustee_gly">Trustee definition</a>.</li>
<li><cite id="endnote_SiyanSecurityReferenceMonitor" style="font-style: normal;"><a  title=""><b>↑</b></a></cite>&#160; Siyan, Kanajit S., 2000.</li>
<li><cite id="endnote_MSDNACEDefinition" style="font-style: normal;"><a  title=""><b>↑</b></a></cite>&#160; <i>MSDN</i>. <a  class="external text" title="http://msdn.microsoft.com/library/en-us/secgloss/security/a_gly.asp?FRAME=true#_security_access_control_entry_gly">ACE definition</a>.</li>
<li><cite id="endnote_RPCVulnerabilities" style="font-style: normal;"><a  title=""><b>↑</b></a></cite>&#160; Microsoft has had numerous security issues caused by vulnerabilities in its RPC mechanisms. A list follows of the security bulletins that Microsoft have issued in regards to RPC vulnerabilities:
<ul>
<li><a  class="external text" title="http://www.microsoft.com/technet/security/bulletin/MS03-026.mspx">Microsoft Security Bulletin MS03-026</a>: issue with a vulnerability in the part of RPC that deals with message exchange over TCP/IP. The failure results because of incorrect handling of malformed messages. This particular vulnerability affects a Distributed Component Object Model (DCOM) interface with RPC, which listens on RPC enabled ports.</li>
<li><a  class="external text" title="http://www.microsoft.com/technet/security/bulletin/MS03-001.mspx">Microsoft Security Bulletin MS03-001</a>: A security vulnerability results from an unchecked buffer in the Locator service. By sending a specially malformed request to the Locator service, an attacker could cause the Locator service to fail, or to run code of the attacker's choice on the system.</li>
<li><a  class="external text" title="http://support.microsoft.com/?kbid=823980">Microsoft Security Bulletin MS03-026</a>: Buffer overrun in RPC may allow code execution</li>
<li><a  class="external text" title="http://www.microsoft.com/technet/security/bulletin/MS03-010.mspx">Microsoft Security Bulletin MS03-010</a>: This particular vulnerabilty affects the RPC Endpoint Mapper process, which listens on TCP/IP port 135. The RPC endpoint mapper allows RPC clients to determine the port number currently assigned to a particular RPC service. To exploit this vulnerability, an attacker would need to establish a TCP/IP connection to the Endpoint Mapper process on a remote machine. Once the connection was established, the attacker would begin the RPC connection negotiation before transmitting a malformed message. At this point, the process on the remote machine would fail. The RPC Endpoint Mapper process is responsible for maintaining the connection information for all of the processes on that machine using RPC. Because the Endpoint Mapper runs within the RPC service itself, exploiting this vulnerability would cause the RPC service to fail, with the attendant loss of any RPC-based services the server offers, as well as potential loss of some COM functions.</li>
<li><a  class="external text" title="http://www.microsoft.com/technet/security/Bulletin/MS04-029.mspx">Microsoft Security Bulletin MS04-029</a>: This RPC Runtime library vulnerability was addressed in CAN-2004-0569, however the title is "Vulnerability in RPC Runtime Library Could Allow Information Disclosure and Denial of Service".</li>
<li><a  class="external text" title="http://www.microsoft.com/technet/security/bulletin/MS00-066.mspx">Microsoft Security Bulletin (MS00-066)</a>: A remote denial of service vulnerability in RPC is found. Blocking ports 135-139 and 445 can stop attacks.</li>
<li><a  class="external text" title="http://www.microsoft.com/technet/security/bulletin/MS03-039.mspx">Microsoft Security Bulletin MS03-039</a>: "There are three newly identified vulnerabilities in the part of RPCSS Service that deals with RPC messages for DCOM activation- two that could allow arbitrary code execution and one that could result in a denial of service. The flaws result from incorrect handling of malformed messages. These particular vulnerabilities affect the Distributed Component Object Model (DCOM) interface within the RPCSS Service. This interface handles DCOM object activation requests that are sent from one machine to another. An attacker who successfully exploited these vulnerabilities could be able to run code with Local System privileges on an affected system, or could cause the RPCSS Service to fail. The attacker could then be able to take any action on the system, including installing programs, viewing, changing or deleting data, or creating new accounts with full privileges. To exploit these vulnerabilities, an attacker could create a program to send a malformed RPC message to a vulnerable system targeting the RPCSS Service."</li>
<li><a  class="external text" title="http://www.microsoft.com/technet/security/bulletin/MS01-041.mspx">Microsoft Security Bulletin MS01-041</a>: "Several of the RPC servers associated with system services in Microsoft Exchange Server, SQL Server, Windows NT 4.0 and Windows 2000 do not adequately validate inputs, and in some cases will accept invalid inputs that prevent normal processing. The specific input values at issue here vary from RPC server to RPC server. An attacker who sent such inputs to an affected RPC server could disrupt its service. The precise type of disruption would depend on the specific service, but could range in effect from minor (e.g., the service temporarily hanging) to major (e.g., the service failing in a way that would require the entire system to be restarted)."</li>
</ul>
</li>
<li><cite id="endnote_InsideWin2kChap2" style="font-style: normal;"><a  title=""><b>↑</b></a></cite>&#160; <i>Inside Microsoft Windows 2000</i> (Third Edition). <i>Microsoft Press</i>. Pages 543-551.</li>
</ol>
</div>
<dl>
<dt>References</dt>
</dl>
<div class="references-small">
<ul>
<li>Finnel, Lynn (2000). <i>MCSE Exam 70-215, Microsoft Windows 2000 Server</i>. <a href="/wiki/Microsoft_Press.html" title="Microsoft Press">Microsoft Press</a>. <a  class="internal">ISBN 1-57231-903-8</a>.</li>
<li>Russinovich,&#160;Mark,&#160;"<a  class="external text" title="http://www.windowsitpro.com/Articles/Index.cfm?ArticleID=299">Inside NT's Object Manager</a>", <i>Windows IT Pro</i>, October 1997.</li>
<li><i>Microsoft</i>. "<a  class="external text" title="http://www.microsoft.com/resources/documentation/Windows/2000/server/reskit/en-us/Default.asp?url=/resources/documentation/Windows/2000/server/reskit/en-us/distrib/dsbg_dat_brlr.asp">Active Directory Data Storage</a>". Retrieved May 9, 2005.</li>
<li><cite class="book" style="font-style:normal">Salomon, David; &amp; Russinovich, Mark E. (2000). <i><a  class="external text" title="http://mipagina.cantv.net/jjaguilerap/w2k_arq.html">Inside Microsoft Windows 2000 (Third Edition)</a></i>. Microsoft Press. <a  class="internal">ISBN 0-7356-1021-5</a>.</cite></li>
<li>Siyan, Kanajit S. (2000). "Windows 2000 Professional Reference". <i>New Riders</i>. <a  class="internal">ISBN 0-7357-0952-1</a>.</li>
</ul>
</div>
<div class="editsection" style="float:right;margin-left:5px;">[<a  title="Edit section: External links">edit</a>]</div>
<p><a name="External_links" id="External_links"></a></p>
<h2>External links</h2>
<ul>
<li><a  class="external text" title="http://www.microsoft.com/windows2000/">Microsoft's official Windows 2000 site</a></li>
<li><a  class="external text" title="http://www.microsoft.com/technet/prodtechnol/windows2000pro/evaluate/featfunc/plugplay.mspx">Windows 2000 Plug and Play architecture</a></li>
</ul>

<!-- 
Pre-expand include size: 19128 bytes
Post-expand include size: 6669 bytes
Template argument size: 2307 bytes
Maximum: 2048000 bytes
-->

<!-- Saved in parser cache with key enwiki:pcache:idhash:1942523-0!1!0!default!!en!2 and timestamp 20060910142549 -->
<div class="printfooter">
Retrieved from "<a </div>
			<div id="catlinks"><p class='catlinks'><a  title="Special:Categories">Categories</a>: <span dir='ltr'><a  title="Category:Windows NT">Windows NT</a></span> | <span dir='ltr'><a  title="Category:Windows Vista">Windows Vista</a></span> | <span dir='ltr'><a  title="Category:Windows XP">Windows XP</a></span></p></div>			<!-- end content -->
			<div class="visualClear"></div>
		</div>
	</div>
		</div>
		<div id="column-one">
	<div id="p-cactions" class="portlet">
		<h5>Views</h5>
		<ul>
				 <li id="ca-nstab-main" class="selected"><a href="/wiki/Architecture_of_the_Windows_NT_operating_system_line.html">Article</a></li>
				 <li id="ca-talk"><a >Discussion</a></li>
				 <li id="ca-edit"><a >Edit this page</a></li>
				 <li id="ca-history"><a >History</a></li>
		</ul>
	</div>
	<div class="portlet" id="p-personal">
		<h5>Personal tools</h5>
		<div class="pBody">
			<ul>
				<li id="pt-login"><a >Sign in / create account</a></li>
			</ul>
		</div>
	</div>
	<div class="portlet" id="p-logo">
		<a style="background-image: url(/images/wiki-en.png);" href="/wiki/Main_Page.html" title="Main Page"></a>
	</div>
	<script type="text/javascript"> if (window.isMSIE55) fixalpha(); </script>
		<div class='portlet' id='p-navigation'>
		<h5>Navigation</h5>
		<div class='pBody'>
			<ul>
				<li id="n-mainpage"><a href="/wiki/Main_Page.html">Main Page</a></li>
				<li id="n-portal"><a >Community Portal</a></li>
				<li id="n-Featured-articles"><a >Featured articles</a></li>
				<li id="n-currentevents"><a >Current events</a></li>
				<li id="n-recentchanges"><a >Recent changes</a></li>
				<li id="n-randompage"><a >Random article</a></li>
				<li id="n-help"><a >Help</a></li>
				<li id="n-contact"><a >Contact Wikipedia</a></li>
				<li id="n-sitesupport"><a >Donations</a></li>
			</ul>
		</div>
	</div>
		<div id="p-search" class="portlet">
		<h5><label for="searchInput">Search</label></h5>
		<div id="searchBody" class="pBody">
			<form action="/wiki/Special:Search" id="searchform"><div>
				<input id="searchInput" name="search" type="text" accesskey="f" value="" />
				<input type='submit' name="go" class="searchButton" id="searchGoButton"	value="Go" />&nbsp;
				<input type='submit' name="fulltext" class="searchButton" value="Search" />
			</div></form>
		</div>
	</div>
	<div class="portlet" id="p-tb">
		<h5>Toolbox</h5>
		<div class="pBody">
			<ul>
				<li id="t-whatlinkshere"><a >What links here</a></li>
				<li id="t-recentchangeslinked"><a >Related changes</a></li>
<li id="t-upload"><a >Upload file</a></li>
<li id="t-specialpages"><a >Special pages</a></li>
				<li id="t-print"><a >Printable version</a></li>				<li id="t-permalink"><a >Permanent link</a></li><li id="t-cite"><a >Cite this article</a></li>			</ul>
		</div>
	</div>
		</div><!-- end of the left (by default at least) column -->
			<div class="visualClear"></div>
			<div id="footer">
				<div id="f-poweredbyico"><a ><img src="/skins-1.5/common/images/poweredby_mediawiki_88x31.png" alt="MediaWiki" /></a></div>
				<div id="f-copyrightico"><a ><img src="/images/wikimedia-button.png" border="0" alt="Wikimedia Foundation"/></a></div>
			<ul id="f-list">
				<li id="lastmod"> This page was last modified 00:56, 30 August 2006.</li>
				<li id="copyright">All text is available under the terms of the <a class='internal'  title="Wikipedia:Text of the GNU Free Documentation License">GNU Free Documentation License</a>. (See <b><a class='internal'  title="Wikipedia:Copyrights">Copyrights</a></b> for details.) <br /> Wikipedia&reg; is a registered trademark of the Wikimedia Foundation, Inc.<br /></li>
				<li id="privacy"><a  title="wikimedia:Privacy policy">Privacy policy</a></li>
				<li id="about"><a  title="Wikipedia:About">About Wikipedia</a></li>
				<li id="disclaimer"><a  title="Wikipedia:General disclaimer">Disclaimers</a></li>
			</ul>
		</div>
		
	
		<script type="text/javascript">if (window.runOnloadHook) runOnloadHook();</script>
</div>
<!-- Served by srv94 in 0.082 secs. --></body></html>
