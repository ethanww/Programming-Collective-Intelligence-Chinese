<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en" dir="ltr">
	<head>
		<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
		<meta name="keywords" content="Upper Memory Area,1990,1991,640K barrier,8088,AUTOEXEC.BAT,BIOS,Bank switching,CONFIG.SYS,Central processing unit,Computer" />
<link rel="shortcut icon"  />
<link rel="search" type="application/opensearchdescription+xml"  />
<link rel="copyright"  />
		<title>Upper Memory Area - Wikipedia, the free encyclopedia</title>
		<style type="text/css" media="screen,projection">/*<![CDATA[*/ @import "/skins-1.5/monobook/main.css?9"; /*]]>*/</style>
		<link rel="stylesheet" type="text/css" media="print"  />
		<!--[if lt IE 5.5000]><style type="text/css">@import "/skins-1.5/monobook/IE50Fixes.css";</style><![endif]-->
		<!--[if IE 5.5000]><style type="text/css">@import "/skins-1.5/monobook/IE55Fixes.css";</style><![endif]-->
		<!--[if IE 6]><style type="text/css">@import "/skins-1.5/monobook/IE60Fixes.css";</style><![endif]-->
		<!--[if IE 7]><style type="text/css">@import "/skins-1.5/monobook/IE70Fixes.css?1";</style><![endif]-->
		<!--[if lt IE 7]><script type="text/javascript" src="/skins-1.5/common/IEFixes.js"></script>
		<meta http-equiv="imagetoolbar" content="no" /><![endif]-->
		
		<script type= "text/javascript">
			var skin = "monobook";
			var stylepath = "/skins-1.5";

			var wgArticlePath = "/wiki/$1";
			var wgScriptPath = "/w";
			var wgServer = "http://en.wikipedia.org";
                        
			var wgCanonicalNamespace = "";
			var wgNamespaceNumber = 0;
			var wgPageName = "Upper_Memory_Area";
			var wgTitle = "Upper Memory Area";
			var wgArticleId = 1969794;
			var wgIsArticle = true;
                        
			var wgUserName = null;
			var wgUserLanguage = "en";
			var wgContentLanguage = "en";
		</script>
		                
		<script type="text/javascript" src="/skins-1.5/common/wikibits.js?1"><!-- wikibits js --></script>
		<script type="text/javascript" src="/w/index.php?title=-&amp;action=raw&amp;gen=js"><!-- site js --></script>
		<style type="text/css">/*<![CDATA[*/
@import "/w/index.php?title=MediaWiki:Common.css&usemsgcache=yes&action=raw&ctype=text/css&smaxage=2678400";
@import "/w/index.php?title=MediaWiki:Monobook.css&usemsgcache=yes&action=raw&ctype=text/css&smaxage=2678400";
@import "/w/index.php?title=-&action=raw&gen=css&maxage=2678400";
/*]]>*/</style>
		<!-- Head Scripts -->
		<script type="text/javascript" src="/skins-1.5/common/ajax.js"></script>
	</head>
<body  class="mediawiki ns-0 ltr">
	<div id="globalWrapper">
		<div id="column-content">
	<div id="content">
		<a name="top" id="top"></a>
		<div id="siteNotice"><div style="text-align:right; font-size:80%">Your <b><a  class="extiw" title="wikimedia:Fundraising">continued donations</a></b> keep Wikipedia running!&nbsp;&nbsp;&nbsp;&nbsp;</div>
</div>		<h1 class="firstHeading">Upper Memory Area</h1>
		<div id="bodyContent">
			<h3 id="siteSub">From Wikipedia, the free encyclopedia</h3>
			<div id="contentSub"></div>
									<div id="jump-to-nav">Jump to: <a >navigation</a>, <a >search</a></div>			<!-- start content -->
			<p>The <b>Upper Memory Area</b> (UMA) is a feature of the design of <a href="/wiki/IBM.html" title="IBM">IBM</a> <a href="/wiki/IBM_PC_compatible.html" title="IBM PC compatible">PC-compatible</a> <a href="/wiki/X86.html" title="X86">x86</a> <a href="/wiki/Computer.html" title="Computer">computers</a>. It is the feature that creates the <a href="/wiki/640K_barrier.html" title="640K barrier">640K barrier</a>.</p>
<p>IBM reserved the uppermost region of the PC memory map for <a href="/wiki/Read-only_memory.html" title="Read-only memory">ROM</a>, <a href="/wiki/RAM.html" title="RAM">RAM</a> on <a href="/wiki/Peripheral.html" title="Peripheral">peripherals</a> and memory-mapped input/output (<a href="/wiki/I/O.html" title="I/O">I/O</a>). This region is called the UMA and lies above <a href="/wiki/Conventional_memory.html" title="Conventional memory">Conventional memory</a>, between 640 <a href="/wiki/KiB.html" title="KiB">KiB</a> and the 1 <a href="/wiki/Megabyte.html" title="Megabyte">MB</a> maximum addressable limit of the original PC's <a href="/wiki/8088.html" title="8088">8088</a> <a href="/wiki/Central_processing_unit.html" title="Central processing unit">CPU</a>. For example, the monochrome video memory area runs from B000 to B7FF. However, even with video RAM, the ROM <a href="/wiki/BIOS.html" title="BIOS">BIOS</a> and I/O ports for expansion cards, much of this 384 KiB of address space was unused - even when a 64 KiB window was reserved for the <a href="/wiki/Expanded_memory.html" title="Expanded memory">Expanded Memory Specification</a> "frame" address into which EMS RAM was <a href="/wiki/Bank_switching.html" title="Bank switching">bank-switched</a>. For example, on most PCs, all or most of the area from C800 to EFFF is normally unused.</p>
<p><br /></p>
<table id="toc" class="toc" summary="Contents">
<tr>
<td>
<div id="toctitle">
<h2>Contents</h2>
</div>
<ul>
<li class="toclevel-1"><a ><span class="tocnumber">1</span> <span class="toctext">Usage in PC operating systems</span></a></li>
<li class="toclevel-1"><a ><span class="tocnumber">2</span> <span class="toctext">Upper Memory and shadow RAM</span></a></li>
<li class="toclevel-1"><a ><span class="tocnumber">3</span> <span class="toctext">Upper Memory on the IBM XT</span></a></li>
<li class="toclevel-1"><a ><span class="tocnumber">4</span> <span class="toctext">x86 PC systems which did not have the UMA</span></a></li>
<li class="toclevel-1"><a ><span class="tocnumber">5</span> <span class="toctext">See also</span></a></li>
<li class="toclevel-1"><a ><span class="tocnumber">6</span> <span class="toctext">External links</span></a></li>
</ul>
</td>
</tr>
</table>
<p><script type="text/javascript">
//<![CDATA[
 if (window.showTocToggle) { var tocShowText = "show"; var tocHideText = "hide"; showTocToggle(); } 
//]]>
</script></p>
<div class="editsection" style="float:right;margin-left:5px;">[<a  title="Edit section: Usage in PC operating systems">edit</a>]</div>
<p><a name="Usage_in_PC_operating_systems" id="Usage_in_PC_operating_systems"></a></p>
<h2>Usage in PC operating systems</h2>
<p>The next stage in the evolution of DOS was for the OS itself to become aware of UMBs and the <a href="/wiki/High_Memory_Area.html" title="High Memory Area">High Memory Area</a>. This occurred with the release of <a href="/wiki/DR-DOS.html" title="DR-DOS">DR-DOS</a> 5.0 in <a href="/wiki/1990.html" title="1990">1990</a>. DR-DOS' built-in memory manager, <a href="/wiki/EMM386.EXE.html" title="EMM386.EXE">EMM386.EXE</a>, could perform most of the basic functionality of <a href="/wiki/QEMM.html" title="QEMM">QEMM</a> and comparable programs.</p>
<p>Where DR-DOS scored over the combination of an older DOS plus QEMM was that the DR-DOS kernel itself and almost all of its data structures could be loaded into high memory, plus all of its associated components into UMBs. This left virtually <i>all</i> the base memory free, allowing configurations with up to 620K out of 640K free.</p>
<p>Configuration was not automatic - free UMBs had to be identified by hand, manually included in the line that loaded EMM386 from CONFIG.SYS, and then drivers and so on had to be manually loaded into UMBs from <a href="/wiki/CONFIG.SYS.html" title="CONFIG.SYS">CONFIG.SYS</a> and <a href="/wiki/AUTOEXEC.BAT.html" title="AUTOEXEC.BAT">AUTOEXEC.BAT</a>. This configuration was not a trivial process. As it was largely automated by the installation program of QEMM, this program survived on the market; indeed, it worked well with DR-DOS' own HMA and UMB support and went on to be one of the best-selling utilities for the PC.</p>
<p>This functionality was copied by <a href="/wiki/Microsoft.html" title="Microsoft">Microsoft</a> with the release of <a href="/wiki/MS-DOS.html" title="MS-DOS">MS-DOS</a> 5.0 in June <a href="/wiki/1991.html" title="1991">1991</a>. Eventually, even more DOS data structures were moved out of conventional memory, allowing up to 631K out of 640K to be left free.</p>
<p>For a period in the early 1990s, manual optimisation of the DOS memory map became a highly-prized skill, allowing for the largest applications to run on even the most complex PC configurations. The technique was to first create as many UMBs as possible, including remapping allocated but unnecessary blocks of memory, such as the monochrome display area on colour machines. Then, DOS' many subcomponents had to be loaded into these UMBs in just the correct sequence as to use the blocks of memory as efficiently as possible, allowing for the fact that some <a href="/wiki/Terminate_and_Stay_Resident.html" title="Terminate and Stay Resident">TSR</a> programs required additional memory while loading which was freed up again once loading was complete. Fortunately there were few dependencies amongst these modules, so it was possible to load them in almost any sequence. Exceptions were that to successfully cache CD-ROMs, most disk caches had to be loaded after any CD-ROM drivers, and that the modules of most network stacks had to be loaded in a certain sequence, essentially working progressively up through the layers of the <a href="/wiki/OSI_model.html" title="OSI model">OSI model</a>.</p>
<p>(It is perhaps interesting to note that conceptually similar lines of enquiry are today being followed in efforts to make modern multitasking OSs boot faster. See the External Links section for more.)</p>
<p>With the addition of a DOS multitasker such as Quarterdeck's <a href="/wiki/DESQview.html" title="DESQview">DESQview</a>, multiple sessions could be started at once, each with 600-odd K of free memory and all sharing access to DOS and its associated drivers and facilities.</p>
<p>The increasing popularity of <a href="/wiki/Windows_3.0.html" title="Windows 3.0">Windows 3.0</a> made this less relevant, as Windows applications were not affected by DOS' base memory limits, but DOS programs running under Windows (with Windows itself acting as a multitasking manager) were still thus constrained. With the release of Windows 95, it became less relevant still, as this version of Windows provides much of the functionality of the DOS device drivers to DOS applications running under Windows, such as CD, network and sound support; the memory map of Win95 DOS boxes was automatically optimised. However, not all DOS programs could execute in this environment. Specifically, programs that tried to directly switch from real mode to protected mode, wouldn't work as this wasn't allowed in the virtual 8086 mode it was running in (actually, this point is now being addressed by upcoming <a href="/wiki/Virtualization.html" title="Virtualization">virtualization</a> technologies such as <a href="/wiki/Vanderpool.html" title="Vanderpool">Vanderpool</a> and <a href="/wiki/Pacifica_%28virtual_machine%29.html" title="Pacifica (virtual machine)">Pacifica</a> for the x86 CPUs). Also, programs that tried making the switch using <a href="/wiki/VCPI.html" title="VCPI">VCPI</a> API (which was introduced to allow DOS programs that needed protected mode to enter it from the virtual 8086 mode set up by a memory manager, as described above) didn't work in Windows 95. Only the DPMI API for switching to protected mode was supported.</p>
<div class="editsection" style="float:right;margin-left:5px;">[<a  title="Edit section: Upper Memory and shadow RAM">edit</a>]</div>
<p><a name="Upper_Memory_and_shadow_RAM" id="Upper_Memory_and_shadow_RAM"></a></p>
<h2>Upper Memory and shadow RAM</h2>
<p>On many systems including modern ones it is possible to use memory reserved for shadowing expansion card ROM as upper memory. Many chipsets reserve up to 384K RAM for this purpose and since this RAM is generally unused it may be used as <a href="/wiki/Real_mode.html" title="Real mode">real mode</a> upper memory with a custom device driver.</p>
<div class="editsection" style="float:right;margin-left:5px;">[<a  title="Edit section: Upper Memory on the IBM XT">edit</a>]</div>
<p><a name="Upper_Memory_on_the_IBM_XT" id="Upper_Memory_on_the_IBM_XT"></a></p>
<h2>Upper Memory on the IBM XT</h2>
<p>On <a href="/wiki/IBM_XT.html" title="IBM XT">IBM XT</a> computers, it was possible to add more memory to the motherboard and use a custom address decoder <a href="/wiki/Programmable_read-only_memory.html" title="Programmable read-only memory">PROM</a> to make it appear in the upper memory area <a  class="external autonumber" title="http://www.textfiles.com/computers/pc869kb.txt">[1]</a>. As with the 386-based upper memory described above, the extra RAM could be used to load TSR files, or as a <a href="/wiki/RAM_disk.html" title="RAM disk">RAM disk</a>.</p>
<div class="editsection" style="float:right;margin-left:5px;">[<a  title="Edit section: x86 PC systems which did not have the UMA">edit</a>]</div>
<p><a name="x86_PC_systems_which_did_not_have_the_UMA" id="x86_PC_systems_which_did_not_have_the_UMA"></a></p>
<h2>x86 PC systems which did not have the UMA</h2>
<p>The existence of the Upper Memory Area and thus the 640 KiB barrier are artifacts of the design of the IBM PC and thus any computer compatible with it - in other words, all <a href="/wiki/IBM_PC_Compatible.html" title="IBM PC Compatible">IBM PC Compatible</a> systems. However, there have been many other computers based on Intel or other x86 processors which were not compatible with the PC and thus did not have an upper memory area and no 640 KiB barrier. For more information, see the article on <a  class="new" title="Non-PC compatible x86 computers">Non-PC compatible x86 computers</a>.</p>
<div class="editsection" style="float:right;margin-left:5px;">[<a  title="Edit section: See also">edit</a>]</div>
<p><a name="See_also" id="See_also"></a></p>
<h2>See also</h2>
<ul>
<li><a href="/wiki/Unreal_mode.html" title="Unreal mode">Unreal mode</a></li>
<li><a href="/wiki/Real_mode.html" title="Real mode">Real mode</a></li>
<li><a href="/wiki/Protected_mode.html" title="Protected mode">Protected mode</a></li>
<li><a href="/wiki/Conventional_memory.html" title="Conventional memory">Conventional memory</a></li>
<li><a href="/wiki/Extended_Memory_Specification.html" title="Extended Memory Specification">Extended Memory Specification</a></li>
<li><a href="/wiki/Expanded_Memory_Specification.html" title="Expanded Memory Specification">Expanded Memory Specification</a></li>
<li><a href="/wiki/High_Memory_Area.html" title="High Memory Area">High Memory Area</a></li>
</ul>
<div class="editsection" style="float:right;margin-left:5px;">[<a  title="Edit section: External links">edit</a>]</div>
<p><a name="External_links" id="External_links"></a></p>
<h2>External links</h2>
<ul>
<li><a  class="external text" title="http://www-128.ibm.com/developerworks/linux/library/l-boot.html">IBM DeveloperWorks: Boot Linux Faster - parallelize Linux system services to improve boot speed</a></li>
</ul>


<!-- Saved in parser cache with key enwiki:pcache:idhash:1969794-0!1!0!default!!en!2 and timestamp 20060906010954 -->
<div class="printfooter">
Retrieved from "<a </div>
			<div id="catlinks"><p class='catlinks'><a  title="Special:Categories">Categories</a>: <span dir='ltr'><a  title="Category:Computer memory">Computer memory</a></span> | <span dir='ltr'><a  title="Category:X86 architecture">X86 architecture</a></span></p></div>			<!-- end content -->
			<div class="visualClear"></div>
		</div>
	</div>
		</div>
		<div id="column-one">
	<div id="p-cactions" class="portlet">
		<h5>Views</h5>
		<ul>
				 <li id="ca-nstab-main" class="selected"><a href="/wiki/Upper_Memory_Area.html">Article</a></li>
				 <li id="ca-talk" class="new"><a >Discussion</a></li>
				 <li id="ca-edit"><a >Edit this page</a></li>
				 <li id="ca-history"><a >History</a></li>
		</ul>
	</div>
	<div class="portlet" id="p-personal">
		<h5>Personal tools</h5>
		<div class="pBody">
			<ul>
				<li id="pt-login"><a >Sign in / create account</a></li>
			</ul>
		</div>
	</div>
	<div class="portlet" id="p-logo">
		<a style="background-image: url(/images/wiki-en.png);" href="/wiki/Main_Page.html" title="Main Page"></a>
	</div>
	<script type="text/javascript"> if (window.isMSIE55) fixalpha(); </script>
		<div class='portlet' id='p-navigation'>
		<h5>Navigation</h5>
		<div class='pBody'>
			<ul>
				<li id="n-mainpage"><a href="/wiki/Main_Page.html">Main Page</a></li>
				<li id="n-portal"><a >Community Portal</a></li>
				<li id="n-Featured-articles"><a >Featured articles</a></li>
				<li id="n-currentevents"><a >Current events</a></li>
				<li id="n-recentchanges"><a >Recent changes</a></li>
				<li id="n-randompage"><a >Random article</a></li>
				<li id="n-help"><a >Help</a></li>
				<li id="n-contact"><a >Contact Wikipedia</a></li>
				<li id="n-sitesupport"><a >Donations</a></li>
			</ul>
		</div>
	</div>
		<div id="p-search" class="portlet">
		<h5><label for="searchInput">Search</label></h5>
		<div id="searchBody" class="pBody">
			<form action="/wiki/Special:Search" id="searchform"><div>
				<input id="searchInput" name="search" type="text" accesskey="f" value="" />
				<input type='submit' name="go" class="searchButton" id="searchGoButton"	value="Go" />&nbsp;
				<input type='submit' name="fulltext" class="searchButton" value="Search" />
			</div></form>
		</div>
	</div>
	<div class="portlet" id="p-tb">
		<h5>Toolbox</h5>
		<div class="pBody">
			<ul>
				<li id="t-whatlinkshere"><a >What links here</a></li>
				<li id="t-recentchangeslinked"><a >Related changes</a></li>
<li id="t-upload"><a >Upload file</a></li>
<li id="t-specialpages"><a >Special pages</a></li>
				<li id="t-print"><a >Printable version</a></li>				<li id="t-permalink"><a >Permanent link</a></li><li id="t-cite"><a >Cite this article</a></li>			</ul>
		</div>
	</div>
	<div id="p-lang" class="portlet">
		<h5>In other languages</h5>
		<div class="pBody">
			<ul>
				<li class="interwiki-de"><a >Deutsch</a></li>
			</ul>
		</div>
	</div>
		</div><!-- end of the left (by default at least) column -->
			<div class="visualClear"></div>
			<div id="footer">
				<div id="f-poweredbyico"><a ><img src="/skins-1.5/common/images/poweredby_mediawiki_88x31.png" alt="MediaWiki" /></a></div>
				<div id="f-copyrightico"><a ><img src="/images/wikimedia-button.png" border="0" alt="Wikimedia Foundation"/></a></div>
			<ul id="f-list">
				<li id="lastmod"> This page was last modified 18:11, 12 August 2006.</li>
				<li id="copyright">All text is available under the terms of the <a class='internal'  title="Wikipedia:Text of the GNU Free Documentation License">GNU Free Documentation License</a>. (See <b><a class='internal'  title="Wikipedia:Copyrights">Copyrights</a></b> for details.) <br /> Wikipedia&reg; is a registered trademark of the Wikimedia Foundation, Inc.<br /></li>
				<li id="privacy"><a  title="wikimedia:Privacy policy">Privacy policy</a></li>
				<li id="about"><a  title="Wikipedia:About">About Wikipedia</a></li>
				<li id="disclaimer"><a  title="Wikipedia:General disclaimer">Disclaimers</a></li>
			</ul>
		</div>
		
	
		<script type="text/javascript">if (window.runOnloadHook) runOnloadHook();</script>
</div>
<!-- Served by srv89 in 0.082 secs. --></body></html>
