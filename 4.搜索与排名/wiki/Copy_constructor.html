<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en" dir="ltr">
	<head>
		<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
		<meta name="keywords" content="Copy constructor,Assignment (computer science),Bitwise,Byte,C++,Class (computer science),Compiler,Computer file,Constructor (computer science),Data pointer,Object (computer science)" />
<link rel="shortcut icon"  />
<link rel="search" type="application/opensearchdescription+xml"  />
<link rel="copyright"  />
		<title>Copy constructor - Wikipedia, the free encyclopedia</title>
		<style type="text/css" media="screen,projection">/*<![CDATA[*/ @import "/skins-1.5/monobook/main.css?9"; /*]]>*/</style>
		<link rel="stylesheet" type="text/css" media="print"  />
		<!--[if lt IE 5.5000]><style type="text/css">@import "/skins-1.5/monobook/IE50Fixes.css";</style><![endif]-->
		<!--[if IE 5.5000]><style type="text/css">@import "/skins-1.5/monobook/IE55Fixes.css";</style><![endif]-->
		<!--[if IE 6]><style type="text/css">@import "/skins-1.5/monobook/IE60Fixes.css";</style><![endif]-->
		<!--[if IE 7]><style type="text/css">@import "/skins-1.5/monobook/IE70Fixes.css?1";</style><![endif]-->
		<!--[if lt IE 7]><script type="text/javascript" src="/skins-1.5/common/IEFixes.js"></script>
		<meta http-equiv="imagetoolbar" content="no" /><![endif]-->
		
		<script type= "text/javascript">
			var skin = "monobook";
			var stylepath = "/skins-1.5";

			var wgArticlePath = "/wiki/$1";
			var wgScriptPath = "/w";
			var wgServer = "http://en.wikipedia.org";
                        
			var wgCanonicalNamespace = "";
			var wgNamespaceNumber = 0;
			var wgPageName = "Copy_constructor";
			var wgTitle = "Copy constructor";
			var wgArticleId = 542190;
			var wgIsArticle = true;
                        
			var wgUserName = null;
			var wgUserLanguage = "en";
			var wgContentLanguage = "en";
		</script>
		                
		<script type="text/javascript" src="/skins-1.5/common/wikibits.js?1"><!-- wikibits js --></script>
		<script type="text/javascript" src="/w/index.php?title=-&amp;action=raw&amp;gen=js"><!-- site js --></script>
		<style type="text/css">/*<![CDATA[*/
@import "/w/index.php?title=MediaWiki:Common.css&usemsgcache=yes&action=raw&ctype=text/css&smaxage=2678400";
@import "/w/index.php?title=MediaWiki:Monobook.css&usemsgcache=yes&action=raw&ctype=text/css&smaxage=2678400";
@import "/w/index.php?title=-&action=raw&gen=css&maxage=2678400";
/*]]>*/</style>
		<!-- Head Scripts -->
		<script type="text/javascript" src="/skins-1.5/common/ajax.js"></script>
	</head>
<body  class="mediawiki ns-0 ltr">
	<div id="globalWrapper">
		<div id="column-content">
	<div id="content">
		<a name="top" id="top"></a>
		<div id="siteNotice"><div style="text-align:right; font-size:80%">Your <b><a  class="extiw" title="wikimedia:Fundraising">continued donations</a></b> keep Wikipedia running!&nbsp;&nbsp;&nbsp;&nbsp;</div>
</div>		<h1 class="firstHeading">Copy constructor</h1>
		<div id="bodyContent">
			<h3 id="siteSub">From Wikipedia, the free encyclopedia</h3>
			<div id="contentSub"></div>
									<div id="jump-to-nav">Jump to: <a >navigation</a>, <a >search</a></div>			<!-- start content -->
			<p>A <b>copy constructor</b> is a special <a href="/wiki/Constructor_%28computer_science%29.html" title="Constructor (computer science)">constructor</a> in the <a href="/wiki/C%2B%2B.html" title="C++">C++</a> <a href="/wiki/Programming_language.html" title="Programming language">programming language</a> used to create a new <a href="/wiki/Object_%28computer_science%29.html" title="Object (computer science)">object</a> as a copy of an existing object. This constructor takes a single argument: a <a href="/wiki/Reference_%28computer_science%29.html" title="Reference (computer science)">reference</a> to the object to be copied.</p>
<p>Normally the <a href="/wiki/Compiler.html" title="Compiler">compiler</a> automatically creates a copy constructor for each <a href="/wiki/Class_%28computer_science%29.html" title="Class (computer science)">class</a> (known as an <b>implicit</b> copy constructor) but for special cases the <a href="/wiki/Programmer.html" title="Programmer">programmer</a> creates the copy constructor, known as an <b>explicit</b> copy constructor. In such cases, the compiler doesn't create one.</p>
<p>A copy constructor is generally needed when an object owns <a href="/wiki/Data_pointer.html" title="Data pointer">pointers</a> or non-shareable <a href="/wiki/Reference_%28computer_science%29.html" title="Reference (computer science)">references</a> such as to a <a href="/wiki/Computer_file.html" title="Computer file">file</a>. It is good practice to provide a copy constructor when providing an assignment operator and vice versa<sup title="The text in the vicinity of this tag needs citation." class="noprint">[<a  title="Wikipedia:Citing sources"><i>citation&#160;needed</i></a>]</sup>.</p>
<table id="toc" class="toc" summary="Contents">
<tr>
<td>
<div id="toctitle">
<h2>Contents</h2>
</div>
<ul>
<li class="toclevel-1"><a ><span class="tocnumber">1</span> <span class="toctext">Operation</span></a></li>
<li class="toclevel-1"><a ><span class="tocnumber">2</span> <span class="toctext">Example</span></a>
<ul>
<li class="toclevel-2"><a ><span class="tocnumber">2.1</span> <span class="toctext">The Implicit Copy Constructor</span></a></li>
<li class="toclevel-2"><a ><span class="tocnumber">2.2</span> <span class="toctext">The Explicit Copy Constructor</span></a></li>
</ul>
</li>
<li class="toclevel-1"><a ><span class="tocnumber">3</span> <span class="toctext">See Also</span></a></li>
</ul>
</td>
</tr>
</table>
<p><script type="text/javascript">
//<![CDATA[
 if (window.showTocToggle) { var tocShowText = "show"; var tocHideText = "hide"; showTocToggle(); } 
//]]>
</script></p>
<div class="editsection" style="float:right;margin-left:5px;">[<a  title="Edit section: Operation">edit</a>]</div>
<p><a name="Operation" id="Operation"></a></p>
<h2>Operation</h2>
<p>An object can be assigned value using one of the two techniques:</p>
<ul>
<li>Explicit assignment in an expression</li>
<li>Initialization</li>
</ul>
<p><b>Explicit assignment in an expression</b></p>
<pre>
Object A;
Object B;
A=B;
</pre>
<p><b>Initialization</b></p>
<p>An object can be initialized by any one of the following ways.</p>
<p>a. Through declaration</p>
<pre>
Object B=A;
</pre>
<p>b. Through function arguments</p>
<pre>
function (Object a);
</pre>
<p>c. Through function return value</p>
<pre>
Object a = function();
</pre>
<p>The copy constructor is used only in case 2 (initializations) and doesn't apply to assignments where the <a href="/wiki/Assignment_%28computer_science%29.html" title="Assignment (computer science)">assignment operator</a> is used instead.</p>
<p>The implicit copy constructor performs a <a href="/wiki/Byte.html" title="Byte">byte</a>-by-byte (also known as <a href="/wiki/Bitwise.html" title="Bitwise">bitwise</a>) copy of the data members of an object. By using an explicit copy constructor the programmer can define the behaviour when an object is copied.</p>
<p><br /></p>
<div class="editsection" style="float:right;margin-left:5px;">[<a  title="Edit section: Example">edit</a>]</div>
<p><a name="Example" id="Example"></a></p>
<h2>Example</h2>
<div class="messagebox cleanup metadata">
<p>Please <b><a  title="Wikipedia:Glossary">wikify</a></b> (format) this article or section as suggested in the <a  title="Wikipedia:Guide to layout">Guide to layout</a> and the <a  title="Wikipedia:Manual of Style">Manual of Style</a>.</p>
<small>Remove this template after wikifying. This article has been tagged since <b>August 2006</b>.</small></div>
<p>This example illustrates why a copy constructor is required in some cases.</p>
<div class="editsection" style="float:right;margin-left:5px;">[<a  title="Edit section: The Implicit Copy Constructor">edit</a>]</div>
<p><a name="The_Implicit_Copy_Constructor" id="The_Implicit_Copy_Constructor"></a></p>
<h3>The Implicit Copy Constructor</h3>
<p>Let us consider the following example for both the cases. There is an Employee class with 1 member variable appraisal. The class has a parameterized constructor for initializing these values and the appropriate setters and getters. The code and the output for the program is shown below.</p>
<pre>
# include &lt;iostream&gt;
# include &lt;cstring&gt;
                                                                                                                                                            
using namespace std;
                                                                                                                                                            
class Employee
{
       private:
               // Max Appraisal points 10. Min 5.
               int appraisal;
                                                                                                                                                            
       public:
               Employee()
               {
                       appraisal=0;
               }
               Employee (int aprsl)
               {
                       appraisal=aprsl;
               }
               int getAppraisal()
               {
                       return appraisal;
               }
               void setAppraisal (int aprsl)
               {
                       appraisal=aprsl;
               }
};
                                                                                                                                                              
int main()
{
       Employee trainee(0);
                                                                                                                                                            
       Employee smarty = trainee;
       Employee newbie = trainee;
                                                                                                                                                            
       cout &lt;&lt;  "Smarty has " &lt;&lt; smarty.getAppraisal() &lt;&lt; " points" &lt;&lt; endl;
       cout &lt;&lt;  "Newbie has " &lt;&lt; newbie.getAppraisal() &lt;&lt; " points" &lt;&lt; endl;
                                                                                                                                                            
       // After 1 year smarty got full appraisal points
       smarty.setAppraisal(10);
       // After 1 year newbie got minimum appraisal points
       newbie.setAppraisal(5);
                                                                                                                                                            
       cout &lt;&lt;  "Smarty has " &lt;&lt; smarty.getAppraisal() &lt;&lt; " points" &lt;&lt; endl;
       cout &lt;&lt;  "Newbie has " &lt;&lt; newbie.getAppraisal() &lt;&lt; " points" &lt;&lt; endl;
                                                                                                                                                            
       return 0;
}
</pre>
<p><b>Output:</b></p>
<pre>
Initial: Smarty has 0 points
Initial: newbie has 0 points
After 1 Year: Smarty has 10 points
After 1 Year: newbie has 5 points
</pre>
<p>As you can see when the lines</p>
<pre>
Employee smarty = trainee;
Employee newbie = trainee;
</pre>
<p>were executed by the compiler, it automatically generates the implicit copy constructor as shown below, thus resulting in 2 objects. Hence Smarty has 10 points and newbie has 5 points at the end of first year</p>
<pre>
Employee (Employee&amp; e)
{
   appraisal=e.appraisal;
}
</pre>
<p>This implicit constructor was not shown in the code above as this would be automatically generated by the compiler. This implicit constructor does good job. Then why is a need for an explicit copy constructor.</p>
<div class="editsection" style="float:right;margin-left:5px;">[<a  title="Edit section: The Explicit Copy Constructor">edit</a>]</div>
<p><a name="The_Explicit_Copy_Constructor" id="The_Explicit_Copy_Constructor"></a></p>
<h3>The Explicit Copy Constructor</h3>
<p>Let us consider the same example considered above with an added field, the employee designation.</p>
<pre>
# include &lt;iostream&gt;
# include &lt;cstring&gt;
                                                                                                                                                            
using namespace std;
                                                                                                                                                            
class Employee
{
       private:
               // Max Appraisal points 10. Min 5.
               int appraisal;
               char* designation;
                                                                                                                                                            
       public:
               Employee()
               {
                       appraisal=0;
               }
               Employee (char* dsgn, int aprsl)
               {
                       appraisal=aprsl;
                       designation = new char[strlen(dsgn)];
                       strcpy (designation, dsgn);
               }
                                                                                                                                                            
               char* getDesignation()
               {
                       return designation;
               }
               void setDesignation (char* dsgn)
               {
                       strcpy (designation, dsgn);
               }
               int getAppraisal()
               {
                       return appraisal;
               }
               void setAppraisal (int aprsl)
               {
                       appraisal=aprsl;
               }
};
                                                                                                                                                            
int main()
{
       Employee trainee("Trainee",0);
                                                                                                                                                            
       Employee smarty = trainee;
       Employee newbie = trainee;
                                                                                                                                                            
       cout &lt;&lt;  "Initial: Smarty : " &lt;&lt; smarty.getAppraisal() &lt;&lt; " points ; Designation :" &lt;&lt; smarty.getDesignation() &lt;&lt; endl;
       cout &lt;&lt;  "Initial: Newbie   : " &lt;&lt; newbie.getAppraisal() &lt;&lt; " points ; Designation :" &lt;&lt; newbie.getDesignation() &lt;&lt; endl;
                                                                                                                                                            
       // After 1 year both have added points to their appraisal
       smarty.setAppraisal(10);
       newbie.setAppraisal(5);
                                                                                                                                                            
       smarty.setDesignation ("Project Leader");
       newbie.setDesignation("Programmer");
                                                                                                                                                            
       cout &lt;&lt;  "Initial: Smarty : " &lt;&lt; smarty.getAppraisal() &lt;&lt; " points ; Designation :" &lt;&lt; smarty.getDesignation() &lt;&lt; endl;
       cout &lt;&lt;  "Initial: Newbie   : " &lt;&lt; newbie.getAppraisal() &lt;&lt; " points ; Designation :" &lt;&lt; newbie.getDesignation() &lt;&lt; endl;
                                                                                                                                                            
       return 0;
}
</pre>
<p><b>Output</b></p>
<pre>
Initial: Smarty : 0 points ; Designation :Trainee
Initial: newbie   : 0 points ; Designation :Trainee
Initial: Smarty : 10 points ; Designation :Programmer
Initial: newbie   : 5 points ; Designation :Programmer
</pre>
<p>The program tries to assign smarty as a Project Leader and newbie as a Programmer. But the program prints incorrect output. This is due to the fact that the implicit copy constructor copies the value of appraisal [OK] and the pointer variable designation [XX]. When the pointer variable is copied, then the pointers in both the objects refer to the same location in memory. Hence, as newbie updated the designation finally, both smarty and newbie have the same designation. This is not what is desired. Hence we go for explicit copy constructor.</p>
<p><br />
By inserting the following method into the class Employee, the explicit constructor is made available to the class.</p>
<pre>
Employee (Employee&amp; emp)
{
   designation = new char[strlen(emp.designation)];
   strcpy (designation, emp.designation);
   appraisal=emp.appraisal;
}
</pre>
<p>Hence this will be invoked by the compiler when a statement such as</p>
<pre>
Employee smarty = trainee;
Employee newbie = trainee;
</pre>
<p>is invoked by the compiler. The output after including the explicit copy constructor is show below.</p>
<p><b>Output</b></p>
<pre>
Initial: Smarty : 0 points ; Designation :Trainee
Initial: Lazy   : 0 points ; Designation :Trainee
Initial: Smarty : 10 points ; Designation :Project Leader
Initial: Lazy   : 5 points ; Designation :Programmer
</pre>
<div class="editsection" style="float:right;margin-left:5px;">[<a  title="Edit section: See Also">edit</a>]</div>
<p><a name="See_Also" id="See_Also"></a></p>
<h2>See Also</h2>
<ul>
<li><a href="/wiki/Assignment_%28computer_science%29.html" title="Assignment (computer science)">Assignment operator</a></li>
</ul>


<!-- Saved in parser cache with key enwiki:pcache:idhash:542190-0!1!0!default!!en!2 and timestamp 20060910160307 -->
<div class="printfooter">
Retrieved from "<a </div>
			<div id="catlinks"><p class='catlinks'><a  title="Special:Categories">Categories</a>: <span dir='ltr'><a  title="Category:Articles with unsourced statements">Articles with unsourced statements</a></span> | <span dir='ltr'><a  title="Category:All pages needing to be wikified">All pages needing to be wikified</a></span> | <span dir='ltr'><a  title="Category:Wikify from August 2006">Wikify from August 2006</a></span> | <span dir='ltr'><a  title="Category:Programming constructs">Programming constructs</a></span></p></div>			<!-- end content -->
			<div class="visualClear"></div>
		</div>
	</div>
		</div>
		<div id="column-one">
	<div id="p-cactions" class="portlet">
		<h5>Views</h5>
		<ul>
				 <li id="ca-nstab-main" class="selected"><a href="/wiki/Copy_constructor.html">Article</a></li>
				 <li id="ca-talk" class="new"><a >Discussion</a></li>
				 <li id="ca-edit"><a >Edit this page</a></li>
				 <li id="ca-history"><a >History</a></li>
		</ul>
	</div>
	<div class="portlet" id="p-personal">
		<h5>Personal tools</h5>
		<div class="pBody">
			<ul>
				<li id="pt-login"><a >Sign in / create account</a></li>
			</ul>
		</div>
	</div>
	<div class="portlet" id="p-logo">
		<a style="background-image: url(/images/wiki-en.png);" href="/wiki/Main_Page.html" title="Main Page"></a>
	</div>
	<script type="text/javascript"> if (window.isMSIE55) fixalpha(); </script>
		<div class='portlet' id='p-navigation'>
		<h5>Navigation</h5>
		<div class='pBody'>
			<ul>
				<li id="n-mainpage"><a href="/wiki/Main_Page.html">Main Page</a></li>
				<li id="n-portal"><a >Community Portal</a></li>
				<li id="n-Featured-articles"><a >Featured articles</a></li>
				<li id="n-currentevents"><a >Current events</a></li>
				<li id="n-recentchanges"><a >Recent changes</a></li>
				<li id="n-randompage"><a >Random article</a></li>
				<li id="n-help"><a >Help</a></li>
				<li id="n-contact"><a >Contact Wikipedia</a></li>
				<li id="n-sitesupport"><a >Donations</a></li>
			</ul>
		</div>
	</div>
		<div id="p-search" class="portlet">
		<h5><label for="searchInput">Search</label></h5>
		<div id="searchBody" class="pBody">
			<form action="/wiki/Special:Search" id="searchform"><div>
				<input id="searchInput" name="search" type="text" accesskey="f" value="" />
				<input type='submit' name="go" class="searchButton" id="searchGoButton"	value="Go" />&nbsp;
				<input type='submit' name="fulltext" class="searchButton" value="Search" />
			</div></form>
		</div>
	</div>
	<div class="portlet" id="p-tb">
		<h5>Toolbox</h5>
		<div class="pBody">
			<ul>
				<li id="t-whatlinkshere"><a >What links here</a></li>
				<li id="t-recentchangeslinked"><a >Related changes</a></li>
<li id="t-upload"><a >Upload file</a></li>
<li id="t-specialpages"><a >Special pages</a></li>
				<li id="t-print"><a >Printable version</a></li>				<li id="t-permalink"><a >Permanent link</a></li><li id="t-cite"><a >Cite this article</a></li>			</ul>
		</div>
	</div>
		</div><!-- end of the left (by default at least) column -->
			<div class="visualClear"></div>
			<div id="footer">
				<div id="f-poweredbyico"><a ><img src="/skins-1.5/common/images/poweredby_mediawiki_88x31.png" alt="MediaWiki" /></a></div>
				<div id="f-copyrightico"><a ><img src="/images/wikimedia-button.png" border="0" alt="Wikimedia Foundation"/></a></div>
			<ul id="f-list">
				<li id="lastmod"> This page was last modified 09:45, 28 August 2006.</li>
				<li id="copyright">All text is available under the terms of the <a class='internal'  title="Wikipedia:Text of the GNU Free Documentation License">GNU Free Documentation License</a>. (See <b><a class='internal'  title="Wikipedia:Copyrights">Copyrights</a></b> for details.) <br /> Wikipedia&reg; is a registered trademark of the Wikimedia Foundation, Inc.<br /></li>
				<li id="privacy"><a  title="wikimedia:Privacy policy">Privacy policy</a></li>
				<li id="about"><a  title="Wikipedia:About">About Wikipedia</a></li>
				<li id="disclaimer"><a  title="Wikipedia:General disclaimer">Disclaimers</a></li>
			</ul>
		</div>
		
	
		<script type="text/javascript">if (window.runOnloadHook) runOnloadHook();</script>
</div>
<!-- Served by srv58 in 0.081 secs. --></body></html>
