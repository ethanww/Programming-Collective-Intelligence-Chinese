<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en" dir="ltr">
	<head>
		<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
		<meta name="keywords" content="Files-11,1985,ASCII,Access control list,Associative array,Backup,Byte,Carriage return,Case-preserving,Checksum,Comparison of file systems" />
<link rel="shortcut icon"  />
<link rel="search" type="application/opensearchdescription+xml"  />
<link rel="copyright"  />
		<title>Files-11 - Wikipedia, the free encyclopedia</title>
		<style type="text/css" media="screen,projection">/*<![CDATA[*/ @import "/skins-1.5/monobook/main.css?9"; /*]]>*/</style>
		<link rel="stylesheet" type="text/css" media="print"  />
		<!--[if lt IE 5.5000]><style type="text/css">@import "/skins-1.5/monobook/IE50Fixes.css";</style><![endif]-->
		<!--[if IE 5.5000]><style type="text/css">@import "/skins-1.5/monobook/IE55Fixes.css";</style><![endif]-->
		<!--[if IE 6]><style type="text/css">@import "/skins-1.5/monobook/IE60Fixes.css";</style><![endif]-->
		<!--[if IE 7]><style type="text/css">@import "/skins-1.5/monobook/IE70Fixes.css?1";</style><![endif]-->
		<!--[if lt IE 7]><script type="text/javascript" src="/skins-1.5/common/IEFixes.js"></script>
		<meta http-equiv="imagetoolbar" content="no" /><![endif]-->
		
		<script type= "text/javascript">
			var skin = "monobook";
			var stylepath = "/skins-1.5";

			var wgArticlePath = "/wiki/$1";
			var wgScriptPath = "/w";
			var wgServer = "http://en.wikipedia.org";
                        
			var wgCanonicalNamespace = "";
			var wgNamespaceNumber = 0;
			var wgPageName = "Files-11";
			var wgTitle = "Files-11";
			var wgArticleId = 711539;
			var wgIsArticle = true;
                        
			var wgUserName = null;
			var wgUserLanguage = "en";
			var wgContentLanguage = "en";
		</script>
		                
		<script type="text/javascript" src="/skins-1.5/common/wikibits.js?1"><!-- wikibits js --></script>
		<script type="text/javascript" src="/w/index.php?title=-&amp;action=raw&amp;gen=js"><!-- site js --></script>
		<style type="text/css">/*<![CDATA[*/
@import "/w/index.php?title=MediaWiki:Common.css&usemsgcache=yes&action=raw&ctype=text/css&smaxage=2678400";
@import "/w/index.php?title=MediaWiki:Monobook.css&usemsgcache=yes&action=raw&ctype=text/css&smaxage=2678400";
@import "/w/index.php?title=-&action=raw&gen=css&maxage=2678400";
/*]]>*/</style>
		<!-- Head Scripts -->
		<script type="text/javascript" src="/skins-1.5/common/ajax.js"></script>
	</head>
<body  class="mediawiki ns-0 ltr">
	<div id="globalWrapper">
		<div id="column-content">
	<div id="content">
		<a name="top" id="top"></a>
		<div id="siteNotice"><div style="text-align:right; font-size:80%">Your <b><a  class="extiw" title="wikimedia:Fundraising">continued donations</a></b> keep Wikipedia running!&nbsp;&nbsp;&nbsp;&nbsp;</div>
</div>		<h1 class="firstHeading">Files-11</h1>
		<div id="bodyContent">
			<h3 id="siteSub">From Wikipedia, the free encyclopedia</h3>
			<div id="contentSub">(Redirected from <a  title="OpenVMS filesystem">OpenVMS filesystem</a>)</div>
									<div id="jump-to-nav">Jump to: <a >navigation</a>, <a >search</a></div>			<!-- start content -->
			<p><b>Files-11</b>, also known as <i>on-disk structure</i>, is the <a href="/wiki/File_system.html" title="File system">file system</a> used by <a href="/wiki/Hewlett-Packard.html" title="Hewlett-Packard">Hewlett-Packard</a>'s <a href="/wiki/OpenVMS.html" title="OpenVMS">OpenVMS</a> <a href="/wiki/Operating_system.html" title="Operating system">operating system</a>, and also (in a simpler form) by the older <a href="/wiki/RSX-11.html" title="RSX-11">RSX-11</a>. It is a <a href="/wiki/Hierarchical.html" title="Hierarchical">hierarchical</a> file system, with support for <a href="/wiki/Access_control_list.html" title="Access control list">access control lists</a>, <a href="/wiki/Record_%28computer_science%29.html" title="Record (computer science)">record</a>-oriented <a href="/wiki/Input/output.html" title="Input/output">I/O</a>, remote <a href="/wiki/Computer_network.html" title="Computer network">network</a> access, and file <a href="/wiki/Versioning.html" title="Versioning">versioning</a>.</p>
<p>Files-11 is similar to, but significantly more advanced than, the filesystems used in previous <a href="/wiki/Digital_Equipment_Corporation.html" title="Digital Equipment Corporation">Digital Equipment Corporation</a> operating systems such as <a href="/wiki/TOPS-20.html" title="TOPS-20">TOPS-20</a> and <a href="/wiki/RSTS/E.html" title="RSTS/E">RSTS/E</a>.</p>
<table id="toc" class="toc" summary="Contents">
<tr>
<td>
<div id="toctitle">
<h2>Contents</h2>
</div>
<ul>
<li class="toclevel-1"><a ><span class="tocnumber">1</span> <span class="toctext">History</span></a></li>
<li class="toclevel-1"><a ><span class="tocnumber">2</span> <span class="toctext">Overview</span></a>
<ul>
<li class="toclevel-2"><a ><span class="tocnumber">2.1</span> <span class="toctext">Directory layout</span></a></li>
<li class="toclevel-2"><a ><span class="tocnumber">2.2</span> <span class="toctext">Disk organization and naming</span></a></li>
<li class="toclevel-2"><a ><span class="tocnumber">2.3</span> <span class="toctext">File security: protection and ACLs</span></a></li>
<li class="toclevel-2"><a ><span class="tocnumber">2.4</span> <span class="toctext">Logical names</span></a></li>
</ul>
</li>
<li class="toclevel-1"><a ><span class="tocnumber">3</span> <span class="toctext">Record-oriented I/O: Record Management Services</span></a></li>
<li class="toclevel-1"><a ><span class="tocnumber">4</span> <span class="toctext">Physical layout: the On-Disk Structure</span></a>
<ul>
<li class="toclevel-2"><a ><span class="tocnumber">4.1</span> <span class="toctext">Directories</span></a></li>
<li class="toclevel-2"><a ><span class="tocnumber">4.2</span> <span class="toctext">The Master File Directory</span></a>
<ul>
<li class="toclevel-3"><a ><span class="tocnumber">4.2.1</span> <span class="toctext">Index file: INDEXF.SYS</span></a></li>
<li class="toclevel-3"><a ><span class="tocnumber">4.2.2</span> <span class="toctext">Other files</span></a></li>
</ul>
</li>
</ul>
</li>
<li class="toclevel-1"><a ><span class="tocnumber">5</span> <span class="toctext">References</span></a></li>
<li class="toclevel-1"><a ><span class="tocnumber">6</span> <span class="toctext">See also</span></a></li>
</ul>
</td>
</tr>
</table>
<p><script type="text/javascript">
//<![CDATA[
 if (window.showTocToggle) { var tocShowText = "show"; var tocHideText = "hide"; showTocToggle(); } 
//]]>
</script></p>
<div class="editsection" style="float:right;margin-left:5px;">[<a  title="Edit section: History">edit</a>]</div>
<p><a name="History" id="History"></a></p>
<h2>History</h2>
<p>The native OpenVMS filesystem is descended from older DEC operating systems, and is similar in many ways. One of the major differences, however, is the layout of directories. These filesystems all provided some form of rudimentary non-hierarchical directory structure, typically based on assigning one directory per user account. Under RSTS/E, each user account was represented by two numbers, a [<i>project</i>,<i>programmer</i>] pair, and had an associated directory. Special system files, such as program executables and the OS itself, were stored in the directory of a reserved system account.</p>
<p>While this was suitable for <a href="/wiki/PDP-11.html" title="PDP-11">PDP-11</a> systems, which possessed limited permanent storage capacity, the advent of <a href="/wiki/VAX.html" title="VAX">VAX</a> systems with very large <a href="/wiki/Hard_drive.html" title="Hard drive">hard drives</a> (for the time) required a more flexible method of file storage—hierarchical directory layout in particular, the most notable improvement in ODS-2.</p>
<div class="editsection" style="float:right;margin-left:5px;">[<a  title="Edit section: Overview">edit</a>]</div>
<p><a name="Overview" id="Overview"></a></p>
<h2>Overview</h2>
<p>"Files-11" is the general term for five separate filesystems, known as on-disk structure (ODS) levels 1, through 5. Support for each filesystem is via individual ancillary control processes (ACPs), one per each of the ODS levels.</p>
<p><b>ODS-1</b> is the flat filesystem used by the RSX-11 OS, supported on older <a href="/wiki/VAX.html" title="VAX">VAX</a> systems for RSX compatibility, but never used to support VMS itself; it has been largely superseded by ODS-2 and ODS-5.</p>
<p><b>ODS-2</b> is the standard VMS filesystem, and remains the most common filesystem for system disks (the disk on which VMS itself is installed).</p>
<p>Although seldom referred to by their ODS level designations, <b>ODS-3</b> and <b>ODS-4</b> are the Files-11 support for the CD-ROM <a href="/wiki/ISO_9660.html" title="ISO 9660">ISO 9660</a> and <a href="/wiki/High_Sierra_%28computer_term%29.html" title="High Sierra (computer term)">High Sierra</a> filesystems, respectively.</p>
<p><b>ODS-5</b> is an extended version of ODS-2 available on <a href="/wiki/DEC_Alpha.html" title="DEC Alpha">Alpha</a> and <a href="/wiki/Itanium.html" title="Itanium">Itanium</a> platforms which adds support for <a href="/wiki/Case-preserving.html" title="Case-preserving">case-preserving</a> filenames with non-<a href="/wiki/ASCII.html" title="ASCII">ASCII</a> characters and improvements to the hierarchical directory support. It was originally intended for file serving to <a href="/wiki/Microsoft_Windows.html" title="Microsoft Windows">Microsoft Windows</a> or other non-VMS systems as part of the "<a  class="new" title="NT affinity">NT affinity</a>" project, but is also used on user disks and <a href="/wiki/Internet.html" title="Internet">Internet</a> servers.</p>
<div class="editsection" style="float:right;margin-left:5px;">[<a  title="Edit section: Directory layout">edit</a>]</div>
<p><a name="Directory_layout" id="Directory_layout"></a></p>
<h3>Directory layout</h3>
<div style="width: 242px; float: right; border: solid 1px grey; margin: 10px">
<p><a  class="image" title="Image:Files11_directory_hierarchy.png"><img src="http://upload.wikimedia.org/wikipedia/en/b/b5/Files11_directory_hierarchy.png" alt="Image:Files11_directory_hierarchy.png" width="242" height="162" longdesc="/wiki/Image:Files11_directory_hierarchy.png" /></a><br />
<small><i>A typical Files-11 directory hierarchy.</i></small></p>
</div>
<p>All files and directories in a Files-11 filesystem are contained inside one or more <i>parent directories</i>, and eventually under the root directory, the <i>master file directory</i> (see below). The filesystem is therefore organised in a tree-like structure.</p>
<p>In this example (<i>see right</i>), <tt>File 2</tt> has a directory entry under both <tt>Dir 2</tt> and <tt>Dir 3</tt>; it is "in" both directories simultaneously. Even if removed from one, it would still exist in the other directory until removed from there also. This is similar to the concept of <a href="/wiki/Hard_links.html" title="Hard links">hard links</a> in <a href="/wiki/UNIX.html" title="UNIX">UNIX</a>, although care must be taken that the file is not actually deleted on disks that are not set up for hard links (only available on ODS-5 disks, and then only if the disk has hard links enabled).<br clear="both" /></p>
<div class="editsection" style="float:right;margin-left:5px;">[<a  title="Edit section: Disk organization and naming">edit</a>]</div>
<p><a name="Disk_organization_and_naming" id="Disk_organization_and_naming"></a></p>
<h3>Disk organization and naming</h3>
<p>An operational VMS system has access to one or more online disks, each of which contains a complete, independent filesystem. These are either local storage or, in the case of a cluster, storage shared with remote systems.</p>
<div style="float: right; border: solid 1px grey; padding: 1px; margin: 2px;">
<div class="center">
<div class="floatnone"><span><a  class="image" title=""><img src="http://upload.wikimedia.org/wikipedia/en/f/f6/OpenVMS_disks_example_1.png" alt="" width="308" height="82" longdesc="/wiki/Image:OpenVMS_disks_example_1.png" /></a></span></div>
</div>
<br />
<p><small><i>Figure 1</i>: Sample OpenVMS cluster disk configuration.</small></p>
</div>
<p>In an OpenVMS cluster configuration, non-private disks are shared between all nodes in the cluster <i>(see figure 1)</i>. In this configuration, the two system disks are accessible to both nodes via the network, but the private disk is not shared: it is mounted for use only by a particular user or process on that machine. Access to files across a cluster is managed by the OpenVMS Distributed Lock Manager, an integral part of the filesystem.</p>
<p>Multiple disks can be combined to form a single large logical disk, or <i>volume set</i>. Disks can also be automatically replicated into <i>shadow sets</i> for data security or faster read performance.</p>
<p>A disk is identified by either its physical name or (more often) by a user-defined logical name. For example, the boot device (system disk) may have the physical name <tt>$3$DKA100</tt>, but it is generally referred to by the <a  title="">logical name</a> <tt>SYS$SYSDEVICE</tt>.</p>
<p>Filesystems on each disk (with the exception of ODS-1) are hierarchical. A fully specified filename consists of a nodename, a username and password, a device name, directory, filename, file type, and a version number, in the format:</p>
<pre>
NODE"user pass"::device:[dir.subdir]filename.type;ver
</pre>
<p>For example, <tt>[DIR1.DIR2.DIR3]FILE.EXT</tt> refers to the latest version of <tt>FILE.EXT</tt>, on the current default disk, in directory <tt>[DIR1.DIR2.DIR3]</tt>. <tt>DIR1</tt> is a subdirectory of the master file directory (MFD), or <i>root directory</i>, and <tt>DIR2</tt> is a subdirectory of <tt>DIR1</tt>. A disk's MFD is identified by <tt>[000000]</tt>.</p>
<p>Most parts of the filename can be omitted, in which case they are taken from the current <i>default file specification</i>. The default file specification replaces the concept of "current directory" in other operating systems by providing a set of defaults for node, device name and directory. All processes have a default file specification which includes disk name and directory, and most VMS filesystem <a href="/wiki/Routine.html" title="Routine">routines</a> accept a default file specification which can also include the file type; the <tt>TYPE</tt> command, for example, defaults to "<tt>.LIS</tt>" as the file type, so the command <tt>TYPE F</tt>, with no extension, attempts to open the file <tt>F.LIS</tt>.</p>
<p>Every file has a version number, which defaults to 1 if no other versions of the same filename are present (otherwise one higher than the greatest version). Every time a file is saved, rather than overwriting the existing version, a new file with the same name but an incremented version number is created. Old versions are can be deleted explicitly, with the <tt>DELETE</tt> or the <tt>PURGE</tt> command, or optionally, older versions of a file can be deleted automatically when the file's <i>version limit</i> is reached (set by <tt>SET FILE/VERSION_LIMIT</tt>). Old versions are thus not overwritten, but are kept on disk and may be retrieved at any time. The architectural limit on version numbers is 32767. The versioning behavior is easily overridden if it is unwanted. In particular, files which are directly updated, such as databases, do not create new versions unless explicitly programmed.</p>
<p>ODS-2 is limited to eight levels of subdirectories, and only uppercase, alphanumeric names (plus the underscore, dash, and dollar sign) up to 39.39 characters (39 for the filename and another 39 for the extension). ODS-5 expands the character set to lowercase letters and most other printable ASCII characters, as well as <a href="/wiki/ISO.html" title="ISO">ISO</a> <a href="/wiki/Latin-1.html" title="Latin-1">Latin-1</a> and <a href="/wiki/Unicode.html" title="Unicode">Unicode</a> characters, increases the maximum filename length and allows unlimited levels of subdirectories. When constructing a pathname for an ODS-5 file which uses characters not allowed under ODS-2, a special "^" syntax is used to preserve backwards compatibility; the file "<tt>file.tar.gz;1</tt>" on an ODS-5 disk, for example, would be referred to as "<tt>file^.tar.gz</tt>"—the file's name is "<tt>file.tar</tt>", and the extension is "<tt>.gz</tt>".</p>
<div class="editsection" style="float:right;margin-left:5px;">[<a  title="Edit section: File security: protection and ACLs">edit</a>]</div>
<p><a name="File_security:_protection_and_ACLs" id="File_security:_protection_and_ACLs"></a></p>
<h3>File security: protection and ACLs</h3>
<p>VMS file security is defined by two mechanisms, UIC-based access control and <a href="/wiki/Access_control_list.html" title="Access control list">ACL</a>-based access control. UIC access control is based on the owner of the file and the UIC, or user, accessing the file. Access is determined by four groups of permissions:</p>
<div class="floatright"><span><a  class="image" title=""><img src="http://upload.wikimedia.org/wikipedia/en/a/a4/OpenVMS_file_protection_bits.png" alt="" width="213" height="50" longdesc="/wiki/Image:OpenVMS_file_protection_bits.png" /></a></span></div>
<ul>
<li>System</li>
<li>Owner</li>
<li>Group</li>
<li>World</li>
</ul>
<p>And four permission bits:</p>
<ul>
<li>Read</li>
<li>Write</li>
<li>Execute</li>
<li>Delete</li>
</ul>
<p>The "system" access applies to any user whose UIC group code is less than or equal to the <tt>SYSGEN</tt> parameter <tt>MAXSYSGROUP</tt> (typically 8, or 10 <a href="/wiki/Octal.html" title="Octal">octal</a>) (for example the <tt>SYSTEM</tt> user); "owner" and "group" apply to the owner of the file and that user's user group, and "world" applies to any other user. There is also a fifth permission bit, "Control", which is used to determine access to change file metadata such as protection. This group cannot be set explicitly; it is always set for System and Owner, and never for Group or World.</p>
<p>UIC-based access control is also affected by four system <a  class="new" title="OpenVMS security">privileges</a>, which allow users holding them to override access controls:</p>
<ul>
<li><tt>BYPASS</tt>: user implicitly has RWED access to all files, regardless of file protection;</li>
<li><tt>READALL</tt>: user implicitly has R access to all files;</li>
<li><tt>SYSPRV</tt>: user may access files based on System protection;</li>
<li><tt>GRPPRV</tt>: user may access files based on System protection if their UIC group matches the file's group.</li>
</ul>
<p>ACLs allow additional privileges to be assigned on a user– or group–specific basis; for example, a web server's UIC could be granted read access to all files in a particular directory. ACLs can be marked as <i>inherited</i>, where a directory file's ACL applies to all files underneath it. ACLs are modified using the <tt>EDIT/ACL</tt> command, and take the form of identifier/access pairs. For example, the ACL entry</p>
<pre>
(IDENTIFIER=HTTP$SERVER,ACCESS=READ+EXECUTE)
</pre>
<p>would allow the user <tt>HTTP$SERVER</tt> to read and execute the file.</p>
<div class="editsection" style="float:right;margin-left:5px;">[<a  title="Edit section: Logical names">edit</a>]</div>
<p><a name="Logical_names" id="Logical_names"></a></p>
<h3>Logical names</h3>
<p>A <b>logical name</b> is a system variable which may reference a disk, directory or file, or contain other program-specific information. For example, the logical <tt>SYS$SYSDEVICE</tt> contains the system's boot device. A logical name normally refers to a single directory or disk, <i>e.g.</i> <tt>SYS$LOGIN:</tt> which is the user's login (home) directory (or directories); these logicals cannot be used as true disk names—<tt>SYS$LOGIN:[DIR]FILE</tt> is not a valid file specification. However, <i>concealed</i> logical names, defined by <tt>DEFINE/TRANSLATION=CONCEALED</tt>, can be used in that way; these <i>rooted</i> directories are defined with a trailing "." on the directory specification, hence</p>
<pre>
$ DEFINE/TRANS=CONCEAL HOME DISK$USERS:[<i>username</i>.]
</pre>
<p>would allow <tt>HOME:[DIR]FILE</tt> to be used. More common are simple logicals which point to specific directories associated with some application software which may be located in on any disk or any directory. Hence logical ABC_EXE may point to a directory of executable programs for application ABC and ABC_TEMP may point to a directory of temporary files for that same application and this directory may be on the same disk and in the same directory tree as ABC_EXE or could be somewhere on another disk (and in a different directory tree).</p>
<p>Logical names do not have a close equivalent in POSIX operating systems. They resemble Unix <a href="/wiki/Environment_variable.html" title="Environment variable">environment variables</a>, except they are expanded by the filesystem, instead of the command shell or application program. They must be defined before use, so it is common for many logical names to be defined in the system startup command file, as well as user login command files.</p>
<p>The closest non-VMS operating system to support the concept of logical names is AmigaOS, through the <tt>ASSIGN</tt> command. Indeed, AmigaOS's disk operating system, AmigaDOS, seems to derive much from VMS, implying that Tripos (of which AmigaDOS is a port of) was itself inspired strongly from VMS. For example, physical device names follow a pattern like DF0: for the first floppy disk, CDROM2: for the 3rd CD-ROM drive, etc. However, since the system can boot off of any attached drive, the operating system creates the SYS: assignment to automatically reference the boot device used. Other assignments, LIBS:, PREFS:, C:, S:, et. al. are also made, themselves referenced off of SYS:. Users are, of course, allowed to create and destroy their own assignments too.</p>
<p>Logical names may reference other logical names (up to a predefined nesting limit of 10), and may contain lists of names to search for an existing filename. Some frequently referenced logical names are:</p>
<table class="wikitable">
<tr>
<th>logical name</th>
<th>meaning</th>
</tr>
<tr>
<td><tt>SYS$INPUT</tt></td>
<td>equivalent of <a href="/wiki/Standard_input.html" title="Standard input">standard input</a>, program data source</td>
</tr>
<tr>
<td><tt>SYS$OUTPUT</tt></td>
<td>equivalent of <a href="/wiki/Standard_output.html" title="Standard output">standard output</a>, program data destination</td>
</tr>
<tr>
<td><tt>SYS$ERROR</tt></td>
<td>equivalent of <a href="/wiki/Standard_error.html" title="Standard error">standard error</a>, program error message destination</td>
</tr>
<tr>
<td><tt>SYS$COMMAND</tt></td>
<td>source of batch file (that is, .COM command file) commands</td>
</tr>
<tr>
<td><tt>TT</tt></td>
<td>the terminal associated with the process</td>
</tr>
<tr>
<td><tt>SYS$PRINT</tt></td>
<td>the default printer or print queue</td>
</tr>
<tr>
<td><tt>SYS$LOGIN</tt></td>
<td>home directory for each user</td>
</tr>
<tr>
<td><tt>SYS$SCRATCH</tt></td>
<td><a href="/wiki/Temporary_folder.html" title="Temporary folder">temporary folder</a>, directory for temporary files</td>
</tr>
<tr>
<td><tt>SYS$SYSTEM</tt></td>
<td>directory containing most system programs and a few vital data files, such as the system authorization file (accounts and passwords)</td>
</tr>
<tr>
<td><tt>SYS$SHARE</tt></td>
<td>shared runtime libraries, executables, etc.</td>
</tr>
<tr>
<td><tt>SYS$LIBRARY</tt></td>
<td>system and added libraries</td>
</tr>
</table>
<div class="editsection" style="float:right;margin-left:5px;">[<a  title="Edit section: Record-oriented I/O: Record Management Services">edit</a>]</div>
<p><a name="Record-oriented_I.2FO:_Record_Management_Services" id="Record-oriented_I.2FO:_Record_Management_Services"></a></p>
<h2>Record-oriented I/O: Record Management Services</h2>
<p><b><a href="/wiki/Record_Management_Services.html" title="Record Management Services">Record Management Services</a></b> is the structured <a href="/wiki/Input/output.html" title="Input/output">I/O</a> layer of the VMS operating system. RMS provides comprehensive program support for managing <i>structured</i> <a href="/wiki/Computer_file.html" title="Computer file">files</a>, such as record-based and indexed <a href="/wiki/Database.html" title="Database">database</a> files. The VMS filesystem, in conjunction with RMS, extends files access past simple <a href="/wiki/Byte.html" title="Byte">byte</a>-streams and allows OS-level support for a variety of rich files types. Each file in the VMS filesystem may be thought of as a <a href="/wiki/Database.html" title="Database">database</a>, containing a series of <a href="/wiki/Record_%28computer_science%29.html" title="Record (computer science)">records</a>, each of which has one of more individual <a href="/wiki/Field_%28computer_science%29.html" title="Field (computer science)">fields</a>. A text file, for example, is a list of records (lines) separated by a newline character. RMS is an example of a <a href="/wiki/Record-oriented_filesystem.html" title="Record-oriented filesystem">record-oriented filesystem</a>.</p>
<p>There are four <b>record formats</b> defined by RMS:</p>
<ul>
<li>Fixed length - all records in the file have the same length.</li>
<li>Variable length - records vary in length, and every record is prefixed by a count byte giving its length.</li>
<li>Variable record length with fixed-length control - records vary in length, but are preceded by a fixed-length control block.</li>
<li>Stream - record vary in length, and every record is separated from the next one by a termination character. A text file is an example of a stream-format file using <a href="/wiki/Line_feed.html" title="Line feed">line feed</a> or <a href="/wiki/Carriage_return.html" title="Carriage return">carriage return</a> to separate records.</li>
</ul>
<p>There are four <b>record access methods</b>, or methods to retrieve extant records from files:</p>
<ul>
<li>Sequential Access - starting with a particular records, subsequent records are retrieved in order until the end of the file.</li>
<li>Relative Record Number Access - records are retrieved via a record <i>number</i> relative to the beginning of the file.</li>
<li>Record File Address Access - records are retrieved directly by their location in the file (RFA, or Record File Address).</li>
<li>Indexed Access - records are retrieved via a key, in a form of <a href="/wiki/Associative_array.html" title="Associative array">key-value mapping</a>.</li>
</ul>
<div class="editsection" style="float:right;margin-left:5px;">[<a  title="Edit section: Physical layout: the On-Disk Structure">edit</a>]</div>
<p><a name="Physical_layout:_the_On-Disk_Structure" id="Physical_layout:_the_On-Disk_Structure"></a></p>
<h2>Physical layout: the On-Disk Structure</h2>
<p>At the disk level, ODS represents the filesystem as an array of <i>blocks</i>, a block being 512 contiguous bytes on one physical disk (<i>volume</i>). Disk blocks are assigned in <i>clusters</i> (originally 3 contiguous blocks but later increased with larger disk sizes). A file on the disk will ideally be entirely contiguous, i.e. the blocks which contain the file will be sequential, but disk fragmentation will sometimes require the file to located in discontiguous clusters in which case the fragments are called 'extents'. Disks may be combined with other disks to form a <i>volume set</i> and files stored anywhere across that set of disks but larger disk sizes have reduced the use of volume sets because management of a single physical disk is simpler.</p>
<p>Every file on a Files-11 disk (or volume set) has a unique <i>file identification</i> (FID), composed of three numbers: the <i>file number</i> (NUM), the <i>file sequence number</i> (SEQ), and the <i>relative volume number</i> (RVN). The NUM indicates where in the <tt>INDEXF.SYS</tt> file (see below) the metadata for the file is located; the SEQ is a generation number which incremented when the file is deleted and another file is created reusing the same INDEXF.SYS entry (so any dangling references to the old file do not accidentally point to the new one); and the RVN indicates the volume number on which the file is stored when using a volume set.</p>
<div class="editsection" style="float:right;margin-left:5px;">[<a  title="Edit section: Directories">edit</a>]</div>
<p><a name="Directories" id="Directories"></a></p>
<h3>Directories</h3>
<p>The structural support of an ODS volume is provided by a <i>directory file</i>—a special file containing a list of file names, file version numbers and their associated FIDs. At the root of the directory structure is the <i>master file directory</i> (MFD), the root directory which contains (directly or indirectly) every file on the volume.</p>
<div style="width: 530px; margin-left: auto; margin-right: auto; clear: both">
<p><a  class="image" title="Image:Files 11 directory structure.png"><img src="http://upload.wikimedia.org/wikipedia/en/b/b5/Files_11_directory_structure.png" alt="Image:Files 11 directory structure.png" width="530" height="275" longdesc="/wiki/Image:Files_11_directory_structure.png" /></a><br />
<small><i>This diagram shows an example directory containing 3 files, and the way each filename is mapped to the <tt>INDEXF.SYS</tt> entry (each INDEXF entry contains more information; only the first few items are shown here).</i></small></p>
</div>
<div class="editsection" style="float:right;margin-left:5px;">[<a  title="Edit section: The Master File Directory">edit</a>]</div>
<p><a name="The_Master_File_Directory" id="The_Master_File_Directory"></a></p>
<h3>The Master File Directory</h3>
<p>At the top level of an ODS filesystem is the <i>master file directory</i> (MFD), which contains all top-level directory files (including itself), and several system files used to store filesystem information. On ODS-1 volumes, a two-level directory structure is used: each <i>user identification code</i> (UIC) has an associated <i>user file directory</i> (UFD), of the form <tt>[GROUP.USER]</tt>. On ODS-2 and later volumes, the layout of directories under the MFD is free-form, subject to a limit on the nesting of directories (8 levels on ODS-2 and unlimited on ODS-5). On multi-volume sets, the MFD is always stored on the first volume, and contains the subdirectories of all volumes.</p>
<p>The following system files are present in the ODS MFD:</p>
<ul>
<li><tt>INDEXF.SYS;1</tt>—Index file</li>
<li><tt>BITMAP.SYS;1</tt>—Storage bitmap file</li>
<li><tt>BADBLK.SYS;1</tt>—Bad block file</li>
<li><tt>000000.DIR;1</tt>—The MFD directory file itself</li>
<li><tt>CORIMG.SYS;1</tt>—Core image file</li>
<li><tt>VOLSET.SYS;1</tt>—Volume set list file (ODS-2/5 only)</li>
<li><tt>CONTIN.SYS;1</tt>—Continuation file (ODS-2/5 only)</li>
<li><tt>BACKUP.SYS;1</tt>—Backup log file (ODS-2/5 only)</li>
<li><tt>BADLOG.SYS;1</tt>—Pending bad block (ODS-2/5 only)</li>
<li><tt>SECURITY.SYS;1</tt>—Volume security profile (ODS-2/5 only)</li>
<li><tt>QUOTA.SYS;1</tt>—Quota file (optional and available under ODS-2/5 only)</li>
</ul>
<p>Note that the filesystem implementation itself does not refer to these files by name, but by their file IDs, which always have the same values. Thus, INDEXF.SYS is always the file with NUM = 1 and SEQ = 1.</p>
<div class="editsection" style="float:right;margin-left:5px;">[<a  title="Edit section: Index file: INDEXF.SYS">edit</a>]</div>
<p><a name="Index_file:_INDEXF.SYS" id="Index_file:_INDEXF.SYS"></a></p>
<h4>Index file: INDEXF.SYS</h4>
<p>The index file contains the most basic information about a Files-11 volume set. Block 1 is the <i>boot block</i>, which contains the location of the <i>primary bootstrap image</i>, used to load the VMS operating system. This is nearly always located at physical block 0 on the disk, so that the hardware firmware can read it. This block is present even on non-system (non-bootable) volumes.</p>
<p>After the boot block is the <i>home block</i>. This contains the <i>volume name</i>, the location of the extents comprising the remainder of the index file, the volume owner's UIC, and the <i>volume protection</i> information. There are normally several copies of the home block, to allow recovery of the volume if it is lost or damaged.</p>
<p>The rest of the index file is composed of <i>file headers</i>, which describe the extents allocated to the files residing on the volume, and file metadata such as the owner UIC, ACLs and protection information. Each file is described by one or more file headers—more than one can be required when a file has a large number of extents. The file header is a fixed-length block, but contains both fixed– and variable–length sections:</p>
<ul>
<li>The <i>header</i> contains the NUM and SEQ, the protection (security) information, and the location(s) of the rest of the file header.</li>
<li>The <i>ident</i> section contains the accounting metadata: the filename, creation and modification times, and the time of the last backup.</li>
<li>The <i>map</i> describes which physical disk blocks (extents) map to each virtual block of the file.</li>
<li>The <i>access control list</i> contains the ACL information for the file.</li>
<li>The <i>reserved area</i> is space at the end of the file header which is not used by the operating system. This can be used by for customer- or vendor-specific information.</li>
<li>The last two bytes of the header are a <a href="/wiki/Checksum.html" title="Checksum">checksum</a> of the previous 255 words, to verify the validity of the header.</li>
</ul>
<p>If possible, the map and ACL sections of the header are contained completely in the <i>primary header</i>. However, if the ACL is too long, or the file contains too many extents, there will not be enough space in the primary header to store them. In this case, an <i>extension header</i> is allocated to store the overflow information.</p>
<div style="margin-left: auto; margin-right: auto; text-align: center;">
<p><a  class="image" title="Image:Indexf layout.png"><img src="http://upload.wikimedia.org/wikipedia/en/d/d6/Indexf_layout.png" alt="Image:Indexf layout.png" width="1141" height="552" longdesc="/wiki/Image:Indexf_layout.png" /></a><br />
<small><i>Layout of the <tt>INDEXF.SYS</tt> header.</i></small></p>
</div>
<p>The file header begins with 4 offsets (<tt>IDOFFSET</tt>, <tt>MPOFFSET</tt>, <tt>ACOFFSET</tt> and <tt>ROFFSET</tt>). Since the size of the areas after the fixed-length header may vary (such as the map and ACL areas), the offsets are required to locate these additional areas. Each offset is the number of 16-bit words from the beginning of the file header to the beginning of that area.</p>
<p>If the file requires multiple headers, the <i>extension segment number</i> (<tt>SEGNUM</tt>) contains the sequence number of this header, beginning at 0 in the first entry in INDEXF.SYS.</p>
<p><tt>STRUCLEV</tt> contains the current structure level (in the high byte) and version (in the low byte) of the filesystem; ODS-2 being structure level 2. An increase in the version number indicates a backwards-compatible change that older software may ignore; changes in the structure level itself are incompatible.</p>
<p><tt>W_FID</tt> (containing three values: <tt>FID_NUM</tt>, <tt>FID_SEQ</tt> and <tt>FID_RVN</tt>, corresponding to the file, sequence, and relative volume number) contains the ID of this file; <tt>EXT_FID</tt> (again composed of three values) holds the location of the next extension header, if any. In both of these values, the RVN is specified as 0 to represent the "current" volume (0 is not normally a valid RVN).</p>
<p><tt>FILECHAR</tt> contains several flags which affect how the file is handled or organised:</p>
<ul>
<li><tt>NOBACKUP</tt> causes this file to be ignored when a <a href="/wiki/Backup.html" title="Backup">backup</a> is run.</li>
<li><tt>WRITEBACK</tt> enables cached (delayed) writes to the file.</li>
<li><tt>READCHECK</tt> causes all reads of the file to be done twice, and compared to ensure data integrity.</li>
<li><tt>WRITCHECK</tt> results in all writes being verified by a subsequent read and compare.</li>
<li><tt>CONTIGB</tt> causes the OS to attempt to allocate storage for the file in as contiguous a manner as possible.</li>
<li><tt>LOCKED</tt> is set if the file is deaccess-locked. If set, this indicates that the file was not properly closed after its last use, and the contents may be inconsistent.</li>
<li><tt>CONTIG</tt> indicates that the file is stored contiguously on disk; that is, each virtual block <span class="texhtml"><i>i</i></span> is mapped to the logical (physical) block <span class="texhtml"><i>i</i> + <i>k</i></span>, for some constant <span class="texhtml"><i>k</i></span>.</li>
<li><tt>BADACL</tt> is set if the file has an invalid access control list.</li>
<li><tt>SPOOL</tt> is set if the file is a spool file, such as an intermediate file used during printing.</li>
<li><tt>DIRECTORY</tt> is set if the file is a directory.</li>
<li><tt>BADBLOCK</tt> is set if the file contains bad blocks.</li>
<li><tt>MARKDEL</tt> is set if the file has been marked for deletion, but is still in use; it will be deleted once closed by the last user.</li>
<li><tt>NOCHARGE</tt>, if set, causes space used by the file to not be taken from the owner's storage quota.</li>
<li><tt>ERASE</tt> causes the file's contents to be overwritten when it is deleted.</li>
</ul>
<p><tt>ACCMODE</tt> describes the <i>privilege level</i> at which a process must be running in order to access the file. VMS defines four privilege levels: user, supervisor, exec, and kernel. Each type of access - read, write, execute and delete - is encoded as a 2-bit integer.</p>
<p><tt>FILEPROT</tt> contains the <a href="/wiki/Discretionary_access_control.html" title="Discretionary access control">discretionary access control</a> information for the file. It is divided into 4 groups of 4 bits each: system, owner, group and world. Bit 0 corresponds to read access, 1 to write, 2 to execute and 3 to delete. Setting a bit denies a particular access to a group; clearing it allows it.</p>
<p>If the file header is an extension header, <tt>BACKLINK</tt> contains the file ID of the primary header; otherwise, it contains the file ID of the directory file containing the primary entry for the file.</p>
<div class="editsection" style="float:right;margin-left:5px;">[<a  title="Edit section: Other files">edit</a>]</div>
<p><a name="Other_files" id="Other_files"></a></p>
<h4>Other files</h4>
<ul>
<li>Storage bitmap file: <tt>BITMAP.SYS</tt></li>
</ul>
<dl>
<dd>The bitmap file is responsible for storing information regarding used and available space on a volume. It contains the <i>storage control block</i> (SCB), which includes summary information detailing ???, and the bitmap, an array of bits to indicate if a cluster of blocks on the disk is free or allocated. In early versions of VMS the cluster comprised 3 blocks but as disk sizes have increased, so has the cluster size.</dd>
</dl>
<ul>
<li>Bad block file: <tt>BADBLK.SYS</tt></li>
</ul>
<dl>
<dd>The bad block file contains a list of bad block on the physical volume, so that the system can avoid allocating them to files. This file was used more in the early days when disks were typically manufactured with more bad patches on the surface.</dd>
</dl>
<ul>
<li>Volume set list file: <tt>VOLSET.SYS</tt></li>
</ul>
<dl>
<dd>The volume set list is located on volume 1 of a volume set, and contains a list of labels of all volumes in the set, and the set's volume name.</dd>
</dl>
<ul>
<li>Continuation file: <tt>CONTIN.SYS</tt></li>
</ul>
<dl>
<dd>When a file on a multi-volume set crosses the boundary of two constituent volumes, the continuation file is used as its extension header and describes the volume where the rest of the file can be found.</dd>
</dl>
<ul>
<li>Quota file: <tt>QUOTA.SYS</tt></li>
</ul>
<dl>
<dd>The quota file contains information of each UIC's disk space usage on a volume. It contains a record for each UIC with space allocated to it on a volume, along with information on how much space is being used by that UIC. <i>NOTE: The DISK QUOTA feature is optional and the file will only exist if the feature was ever enabled.</i></dd>
</dl>
<ul>
<li>Volume security profile: <tt>SECURITY.SYS</tt></li>
</ul>
<dl>
<dd>The volume security profile contains the volume's owner UIC, the volume protection mask, and its access control list.</dd>
</dl>
<div class="editsection" style="float:right;margin-left:5px;">[<a  title="Edit section: References">edit</a>]</div>
<p><a name="References" id="References"></a></p>
<h2>References</h2>
<ul>
<li>Andrew C. Goldstein, VAX/VMS Software Development (<a href="/wiki/1985.html" title="1985">1985</a>-<a href="/wiki/January_11.html" title="January 11">01-11</a>). "<i>Files-11 On-Disk Structure Specification</i>".</li>
<li><cite class="book" style="font-style:normal">Hewlett-Packard Development Company, L.P. (September 2003). “Appendix A: Files-11 Disk Structure”, <i>OpenVMS System Manager's Manual, Volume 2: Tuning, Monitoring, and Complex Systems</i>.</cite></li>
<li><cite class="book" style="font-style:normal">Kirby McCoy (1990). <i>VMS File System Internals</i>. Digital Press. <a  class="internal">ISBN 1-55558-056-4</a>.</cite></li>
</ul>
<div class="editsection" style="float:right;margin-left:5px;">[<a  title="Edit section: See also">edit</a>]</div>
<p><a name="See_also" id="See_also"></a></p>
<h2>See also</h2>
<ul>
<li><a href="/wiki/Comparison_of_file_systems.html" title="Comparison of file systems">Comparison of file systems</a></li>
</ul>

<!-- 
Pre-expand include size: 6246 bytes
Post-expand include size: 1502 bytes
Template argument size: 1952 bytes
Maximum: 2048000 bytes
-->

<!-- Saved in parser cache with key enwiki:pcache:idhash:711539-0!1!0!default!!en!2 and timestamp 20060910145427 -->
<div class="printfooter">
Retrieved from "<a </div>
			<div id="catlinks"><p class='catlinks'><a  title="Special:Categories">Categories</a>: <span dir='ltr'><a  title="Category:Disk file systems">Disk file systems</a></span> | <span dir='ltr'><a  title="Category:Network file systems">Network file systems</a></span> | <span dir='ltr'><a  title="Category:OpenVMS">OpenVMS</a></span></p></div>			<!-- end content -->
			<div class="visualClear"></div>
		</div>
	</div>
		</div>
		<div id="column-one">
	<div id="p-cactions" class="portlet">
		<h5>Views</h5>
		<ul>
				 <li id="ca-nstab-main" class="selected"><a href="/wiki/Files-11.html">Article</a></li>
				 <li id="ca-talk"><a >Discussion</a></li>
				 <li id="ca-edit"><a >Edit this page</a></li>
				 <li id="ca-history"><a >History</a></li>
		</ul>
	</div>
	<div class="portlet" id="p-personal">
		<h5>Personal tools</h5>
		<div class="pBody">
			<ul>
				<li id="pt-login"><a >Sign in / create account</a></li>
			</ul>
		</div>
	</div>
	<div class="portlet" id="p-logo">
		<a style="background-image: url(/images/wiki-en.png);" href="/wiki/Main_Page.html" title="Main Page"></a>
	</div>
	<script type="text/javascript"> if (window.isMSIE55) fixalpha(); </script>
		<div class='portlet' id='p-navigation'>
		<h5>Navigation</h5>
		<div class='pBody'>
			<ul>
				<li id="n-mainpage"><a href="/wiki/Main_Page.html">Main Page</a></li>
				<li id="n-portal"><a >Community Portal</a></li>
				<li id="n-Featured-articles"><a >Featured articles</a></li>
				<li id="n-currentevents"><a >Current events</a></li>
				<li id="n-recentchanges"><a >Recent changes</a></li>
				<li id="n-randompage"><a >Random article</a></li>
				<li id="n-help"><a >Help</a></li>
				<li id="n-contact"><a >Contact Wikipedia</a></li>
				<li id="n-sitesupport"><a >Donations</a></li>
			</ul>
		</div>
	</div>
		<div id="p-search" class="portlet">
		<h5><label for="searchInput">Search</label></h5>
		<div id="searchBody" class="pBody">
			<form action="/wiki/Special:Search" id="searchform"><div>
				<input id="searchInput" name="search" type="text" accesskey="f" value="" />
				<input type='submit' name="go" class="searchButton" id="searchGoButton"	value="Go" />&nbsp;
				<input type='submit' name="fulltext" class="searchButton" value="Search" />
			</div></form>
		</div>
	</div>
	<div class="portlet" id="p-tb">
		<h5>Toolbox</h5>
		<div class="pBody">
			<ul>
				<li id="t-whatlinkshere"><a >What links here</a></li>
				<li id="t-recentchangeslinked"><a >Related changes</a></li>
<li id="t-upload"><a >Upload file</a></li>
<li id="t-specialpages"><a >Special pages</a></li>
				<li id="t-print"><a >Printable version</a></li>				<li id="t-permalink"><a >Permanent link</a></li><li id="t-cite"><a >Cite this article</a></li>			</ul>
		</div>
	</div>
		</div><!-- end of the left (by default at least) column -->
			<div class="visualClear"></div>
			<div id="footer">
				<div id="f-poweredbyico"><a ><img src="/skins-1.5/common/images/poweredby_mediawiki_88x31.png" alt="MediaWiki" /></a></div>
				<div id="f-copyrightico"><a ><img src="/images/wikimedia-button.png" border="0" alt="Wikimedia Foundation"/></a></div>
			<ul id="f-list">
				<li id="lastmod"> This page was last modified 02:02, 4 September 2006.</li>
				<li id="copyright">All text is available under the terms of the <a class='internal'  title="Wikipedia:Text of the GNU Free Documentation License">GNU Free Documentation License</a>. (See <b><a class='internal'  title="Wikipedia:Copyrights">Copyrights</a></b> for details.) <br /> Wikipedia&reg; is a registered trademark of the Wikimedia Foundation, Inc.<br /></li>
				<li id="privacy"><a  title="wikimedia:Privacy policy">Privacy policy</a></li>
				<li id="about"><a  title="Wikipedia:About">About Wikipedia</a></li>
				<li id="disclaimer"><a  title="Wikipedia:General disclaimer">Disclaimers</a></li>
			</ul>
		</div>
		
	
		<script type="text/javascript">if (window.runOnloadHook) runOnloadHook();</script>
</div>
<!-- Served by srv96 in 0.085 secs. --></body></html>
